<dom-module id="lrnapp-studio-submission-comments">
  <template>
    <style>
       :host {
        display: block;
      }
      /*COMMENT CSS*/

      paper-card {
        width: 100%;
      }

      .cmmnt paper-card {
        padding: 2em 2em 0 2em;
        clear: right;
      }

      .cmmnt.card-content {
        padding-left: 2em;
        padding-right: 2em;
        width: 100%;
      }

      .cmmnt lrndesign-avatar {
        float: left;
        margin-right: 1em;
      }

      .cmmnt.flex-wrap {
        @apply --layout-horizontal;
        @apply --layout-wrap;
      }

      .cmmnt.date {
        font-family: 'Open Sans', sans-serif;
        font-weight: lighter;
        font-size: 12px;
        color: #555;
      }

      .cmmnt h3 {
        margin-bottom: 0;
      }

      .right-actions {
        float: right;
      }

      .action-reply {
        margin: 40px 0 10px 0;
        text-transform: uppercase;
        font-family: 'Open Sans', sans-serif;
        font-weight: lighter;
        font-size: 12px;
        color: #555;
      }

      .comment-body {
        margin-left: 55px;
        margin-right: 125px;
      }



      .comment-reply.card-actions {
        width: 95%;
      }

      .comment-depth-1 {
        margin-left: 0;
      }

      .comment-depth-2 {
        margin-left: 100px;
      }

      .comment-depth-3 {
        margin-left: 150px;
      }

      .comment-depth-4 {
        margin-left: 150px;
      }

      .comment-depth-5 {
        margin-left: 150px;
      }

      .comment-depth-6 {
        margin-left: 150px;
      }

      .hidden {
        display: none;
      }

      .grey-said {
        color: #555;
      }

      .container-flex {
        display: flex;
      }

      p {
        line-height: 1.25em;
      }

      paper-icon-button:hover {
        color: #555
      }
    </style>


    <div class="cmmnt">

      <h2>Comments</h2>
      <!-- ----- Comment Body -----  -->
      <template is="dom-if" if="[[submission.relationships.comments]]">
        <template is="dom-repeat" items="[[_toArray(submission.relationships.comments.data)]]" as="comment">
          <div class$="card-content comment-depth-[[comment.attributes.threadDepth]]">
            <div class="container-flex">
              <lrndesign-avatar label="[[comment.relationships.author.data.name]]"></lrndesign-avatar>
              <p class="date">{{comment.meta.created}}</p>
              <paper-card>
                <h4>{{comment.relationships.author.data.name}} <span class="grey-said">said:</span></h4>
                <p class="comment-body">{{comment.attributes.body}}</p>
                <div class="card-actions">
                  <paper-icon-button id="reply" icon="icons:reply"></paper-icon-button><span class="action-reply">reply</span>
                  <paper-tooltip for="reply" animation-delay="0">Reply</paper-tooltip>
                  <paper-icon-button class="right-actions hidden" id="edit" icon="icons:create"></paper-icon-button>
                  <paper-tooltip for="edit" animation-delay="0">Edit</paper-tooltip>
                  <paper-icon-button class="right-actions hidden" id="delete" icon="icons:delete-forever"></paper-icon-button>
                  <paper-tooltip for="delete" animation-delay="0">Delete</paper-tooltip>
                </div>
              </paper-card>
            </div>
          </div>
        </template>
      </template>

    </div>

  </template>
  <script>
    Polymer({
      is: 'lrnapp-studio-submission-comments',
      properties: {
        submission: {
          type: Object
        },
      },
      /**
       * Simple way to convert from object to array.
       */
      _toArray: function (obj) {
        return Object.keys(obj).map(function (key) {
          return obj[key];
        });
      },
    });
  </script>
</dom-module>