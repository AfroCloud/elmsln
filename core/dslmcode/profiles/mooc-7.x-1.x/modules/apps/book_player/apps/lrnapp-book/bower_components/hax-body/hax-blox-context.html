
<link rel="import" href="hax-context-item-menu.html">
<link rel="import" href="hax-context-item.html">

<!--
`hax-blox-context`
A context menu that provides common hax-blox based authoring options.

@demo demo/index.html

@microcopy - the mental model for this element
 - context menu - this is a menu of hax-blox based buttons and events for use in a larger solution.
-->

<dom-module id="hax-blox-context">
  <template>
    <style>
      :host {
        display: block;
      }
      app-toolbar {
        background-color: white;
        padding: 0;
        height: 40px;
      }
      hax-context-item {
        margin: 0;
        width: 40px;
        height: 40px;
      }
      .close-cap {
        margin: 0;
        padding: 0;
        border-right: 1px solid black;
      }
    </style>
    <app-toolbar>
      <hax-context-item
        icon="close"
        label="Close menu"
        event-name="close-menu"
        class="close-cap"
        direction="left"></hax-context-item>
      <hax-context-item-menu
        selected-value="{{bloxLayout}}"
        id="layout"
        icon="[[bloxIcon]]"
        label="Layout">
        <paper-item value="cols-100">1 column (100%)</paper-item>
        <paper-item value="cols-50-50">two column (50%)</paper-item>
        <paper-item value="cols-25-75">two column (25% - 75%)</paper-item>
        <paper-item value="cols-66-33">two column (33% - 66%)</paper-item>
        <paper-item value="cols-75-25">two column (75% - 25%)</paper-item>
        <paper-item value="cols-33-33-33">three column (33%)</paper-item>
        <paper-item value="cols-25-25-25-25">four column (25%)</paper-item>
      </hax-context-item-menu>
      <hax-context-item
        icon="settings"
        label="Settings"
        modal
        event-name="hax-modal-settings"></hax-context-item>
    </app-toolbar>
  </template>

  <script>
    Polymer({

      is: 'hax-blox-context',
      listeners: {
        'hax-context-item-selected': '_haxContextOperation',
      },
      properties: {
        /**
         * Blox layout.
         */
        bloxLayout: {
          type: String,
          value: 'cols-100',
        },
        /**
         * Layout icon to reflect state.
         */
        bloxIcon: {
          type: String,
          value: 'view-quilt',
        },
      },
      /**
       * Respond to simple modifications.
       */
      _haxContextOperation: function(e) {
        let detail = e.detail;
        // support a simple insert event to bubble up or everything else
        switch(detail.eventName) {
          case 'cols-100':
          case 'cols-50-50':
          case 'cols-25-75':
          case 'cols-66-33':
          case 'cols-75-25':
          case 'cols-33-33-33':
          case 'cols-25-25-25-25':
            // all the cool kids event retarget
            this.fire('hax-context-item-selected', {eventName: 'blox-layout-change', value: detail.eventName});
          break;
          case 'close-menu':
            this.$.layout.hideMenu();
          break;
        }
      },
    });
  </script>
</dom-module>
