<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../materializecss-styles/materializecss-styles.html"><link rel="import" href="../hax-body-behaviors/hax-body-behaviors.html"><link rel="import" href="../schema-behaviors/schema-behaviors.html"><link rel="import" href="../a11y-behaviors/a11y-behaviors.html"><link rel="import" href="../media-behaviors/media-behaviors.html"><link rel="import" href="../simple-colors/simple-colors.html"><link rel="import" href="../a11y-media-player/a11y-media-player.html"><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"><link rel="prefetch" href="../materializecss-styles/colors.html"><link rel="prefetch" href="../materializecss-styles/shapes.html"><link rel="prefetch" href="../simple-colors/simple-colors-utility.html"><link rel="prefetch" href="../paper-slider/paper-slider.html"><link rel="prefetch" href="../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="prefetch" href="../iron-flex-layout/iron-flex-layout.html"><link rel="prefetch" href="../iron-form-element-behavior/iron-form-element-behavior.html"><link rel="prefetch" href="../iron-range-behavior/iron-range-behavior.html"><link rel="prefetch" href="../paper-behaviors/paper-inky-focus-behavior.html"><link rel="prefetch" href="../iron-behaviors/iron-button-state.html"><link rel="prefetch" href="../iron-behaviors/iron-control-state.html"><link rel="prefetch" href="../paper-behaviors/paper-ripple-behavior.html"><link rel="prefetch" href="../paper-ripple/paper-ripple.html"><link rel="prefetch" href="../paper-input/paper-input.html"><link rel="prefetch" href="../iron-input/iron-input.html"><link rel="prefetch" href="../iron-a11y-announcer/iron-a11y-announcer.html"><link rel="prefetch" href="../iron-validatable-behavior/iron-validatable-behavior.html"><link rel="prefetch" href="../iron-meta/iron-meta.html"><link rel="prefetch" href="../paper-input/paper-input-behavior.html"><link rel="prefetch" href="../paper-input/paper-input-char-counter.html"><link rel="prefetch" href="../paper-styles/typography.html"><link rel="prefetch" href="../font-roboto/roboto.html"><link rel="prefetch" href="../paper-input/paper-input-addon-behavior.html"><link rel="prefetch" href="../paper-input/paper-input-container.html"><link rel="prefetch" href="../paper-styles/default-theme.html"><link rel="prefetch" href="../paper-styles/color.html"><link rel="prefetch" href="../paper-input/paper-input-error.html"><link rel="prefetch" href="../paper-progress/paper-progress.html"><link rel="prefetch" href="../web-animations-js/web-animations-next-lite.min.html"><link rel="prefetch" href="../web-animations-js/web-animations-next-lite.min.js"><link rel="prefetch" href="../a11y-media-player/screenfull-lib.html"><link rel="prefetch" href="../screenfull/dist/screenfull.js"><link rel="prefetch" href="../a11y-media-player/a11y-media-behaviors.html"><link rel="prefetch" href="../responsive-utility/responsive-utility.html"><link rel="prefetch" href="../iron-resizable-behavior/iron-resizable-behavior.html"><link rel="prefetch" href="../a11y-media-player/a11y-media-video-loader.html"><link rel="prefetch" href="../a11y-media-player/a11y-media-play-button.html"><link rel="prefetch" href="../paper-tooltip/paper-tooltip.html"><link rel="prefetch" href="../a11y-media-player/a11y-media-controls.html"><link rel="prefetch" href="../paper-listbox/paper-listbox.html"><link rel="prefetch" href="../iron-menu-behavior/iron-menu-behavior.html"><link rel="prefetch" href="../iron-selector/iron-multi-selectable.html"><link rel="prefetch" href="../iron-selector/iron-selectable.html"><link rel="prefetch" href="../iron-selector/iron-selection.html"><link rel="prefetch" href="../paper-item/paper-item.html"><link rel="prefetch" href="../paper-item/paper-item-behavior.html"><link rel="prefetch" href="../paper-item/paper-item-shared-styles.html"><link rel="prefetch" href="../paper-menu-button/paper-menu-button.html"><link rel="prefetch" href="../iron-dropdown/iron-dropdown.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-behavior.html"><link rel="prefetch" href="../iron-fit-behavior/iron-fit-behavior.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-manager.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-backdrop.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-scroll-manager.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-focusables-helper.html"><link rel="prefetch" href="../neon-animation/neon-animation-runner-behavior.html"><link rel="prefetch" href="../neon-animation/neon-animatable-behavior.html"><link rel="prefetch" href="../iron-dropdown/iron-dropdown-scroll-manager.html"><link rel="prefetch" href="../neon-animation/animations/fade-in-animation.html"><link rel="prefetch" href="../neon-animation/neon-animation-behavior.html"><link rel="prefetch" href="../neon-animation/animations/fade-out-animation.html"><link rel="prefetch" href="../paper-styles/shadow.html"><link rel="prefetch" href="../paper-menu-button/paper-menu-button-animations.html"><link rel="prefetch" href="../paper-toggle-button/paper-toggle-button.html"><link rel="prefetch" href="../paper-behaviors/paper-checked-element-behavior.html"><link rel="prefetch" href="../iron-checked-element-behavior/iron-checked-element-behavior.html"><link rel="prefetch" href="../dropdown-select/dropdown-select.html"><link rel="prefetch" href="../paper-dropdown-menu/paper-dropdown-menu.html"><link rel="prefetch" href="../iron-icon/iron-icon.html"><link rel="prefetch" href="../paper-dropdown-menu/paper-dropdown-menu-icons.html"><link rel="prefetch" href="../iron-iconset-svg/iron-iconset-svg.html"><link rel="prefetch" href="../paper-dropdown-menu/paper-dropdown-menu-shared-styles.html"><link rel="prefetch" href="../a11y-media-player/a11y-media-button.html"><link rel="prefetch" href="../iron-icons/iron-icons.html"><link rel="prefetch" href="../iron-icons/av-icons.html"><link rel="prefetch" href="../a11y-media-player/a11y-media-transcript.html"><link rel="prefetch" href="../a11y-media-player/a11y-media-transcript-cue.html"><link rel="prefetch" href="../iron-a11y-keys/iron-a11y-keys.html"><link rel="prefetch" href="../simple-search/simple-search-content.html"><link rel="prefetch" href="../a11y-media-player/a11y-media-transcript-controls.html"><link rel="prefetch" href="../simple-search/simple-search.html"><link rel="prefetch" href="../a11y-media-player/a11y-media-utility.html"><link rel="prefetch" href="../a11y-media-player/a11y-media-youtube-utility.html"></head><body><dom-module id="video-player"><template><style>:host{display:block;margin:0 0 15px;}.video-caption{font-style:italic;margin:0;padding:8px;@apply --video-player-caption-theme;}</style><template is="dom-if" if="[[isA11yMedia]]" restamp=""><a11y-media-player accent-color$="[[accentColor]]" dark$="[[dark]]" dark-transcript$="[[darkTranscript]]" disable-interactive$="[[disableInteractive]]" hide-timestamps$="[[hideTimestamps]]" lang$="[[lang]]" media-type$="[[sourceType]]" preload$="[[preload]]" media-title$="[[mediaTitle]]" stand-alone$="[[__standAlone]]" sticky-corner$="[[stickyCorner]]" thumbnail-src$="[[thumbnailSrc]]" youtube-id$="[[youtubeId]]"><slot name="source"></slot><slot name="track"></slot><template id="sources" is="dom-repeat" items="[[sourceData]]" as="sd"><source src$="[[sd.src]]" type$="[[sd.type]]"></template><template id="tracks" is="dom-repeat" items="[[tracks]]" as="track"><track src$="[[track.src]]" kind$="[[track.kind]]" label$="[[track.label]]" srclang$="[[track.lang]]"></template><slot name="caption"></slot></a11y-media-player></template><template is="dom-if" if="[[!isA11yMedia]]"><template is="dom-if" if="[[sandboxed]]"><div class="responsive-video-container" lang$="[[lang]]"><webview resource$="[[schemaResourceID]]-video" src$="[[sourceData.0.src]]" width$="[[width]]" height$="[[height]]" frameborder="0"></webview></div></template><template is="dom-if" if="[[!sandboxed]]"><template is="dom-if" if="[[iframed]]"><div class="responsive-video-container" lang$="[[lang]]"><iframe resource$="[[schemaResourceID]]-video" src$="[[sourceData.0.src]]" width$="[[width]]" height$="[[height]]" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe></div></template></template><div id="videocaption" class$="video-caption"><p>[[mediaTitle]] <span class="media-type print-only">(embedded media)</span></p><slot name="caption"></slot></div></template></template><script>Polymer({is:"video-player",behaviors:[HAXBehaviors.PropertiesBehaviors,MaterializeCSSBehaviors.ColorBehaviors,SchemaBehaviors.Schema,A11yBehaviors.A11y,MediaBehaviors.Video],properties:{accentColor:{type:String,value:null,reflectToAttribute:!0},dark:{type:Boolean,value:!1,reflectToAttribute:!0},darkTranscript:{type:Boolean,value:!1},disableInteractive:{type:Boolean,value:!1},height:{type:String,value:null},hideTimestamps:{type:Boolean,value:!1},iframed:{type:Boolean,computed:"_computeIframed(sourceData, sandboxed)"},isA11yMedia:{type:Boolean,computed:"_computeA11yMedia(sourceType, sandboxed)"},lang:{type:String,value:"en"},mediaTitle:{type:String},preload:{type:String,value:"metadata"},sandboxed:{type:Boolean,computed:"_computeSandboxed(sourceData)"},source:{type:String,value:null},sources:{type:Array,value:[]},sourceData:{type:Array,computed:"_getSourceData(source,sources,tracks)",reflectToAttribute:!0},sourceType:{type:String,computed:"_computeSourceType(sourceData)"},youtubeId:{type:String,computed:"_computeYoutubeId(source,sourceType)"},isYoutube:{type:Boolean,computed:"_computeYoutube(sourceType)"},stickyCorner:{type:String,value:"top-right",reflectToAttribute:!0},tracks:{type:Array,value:[]},thumbnailSrc:{type:String,value:null,reflectToAttribute:!0},width:{type:String,value:null}},attached:function attached(){this.setHaxProperties({canScale:!0,canPosition:!0,canEditSource:!1,gizmo:{title:"Video player",description:"This can present video in a highly accessible manner regardless of source.",icon:"av:play-circle-filled",color:"red",groups:["Video","Media"],handles:[{type:"video",source:"source",title:"caption",caption:"caption",description:"caption",color:"primaryColor"}],meta:{author:"LRNWebComponents"}},settings:{quick:[{property:"accentColor",title:"Accent color",description:"Select the accent color for the player.",inputMethod:"colorpicker",icon:"editor:format-color-fill"},{property:"dark",title:"Dark theme",description:"Enable dark theme for the player.",inputMethod:"boolean",icon:"invert-colors"}],configure:[{property:"source",title:"Source",description:"The URL for this video.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"},{property:"track",title:"Closed captions",description:"The URL for the captions file.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"},{property:"thumbnailSrc",title:"Thumbnail image",description:"Optional. The URL for a thumbnail/poster image.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"},{property:"mediaTitle",title:"Title",description:"Simple title for under video",inputMethod:"textfield",icon:"av:video-label",required:!1,validationType:"text"},{property:"accentColor",title:"Accent color",description:"Select the accent color for the player.",inputMethod:"colorpicker",icon:"editor:format-color-fill"},{property:"dark",title:"Dark theme",description:"Enable dark theme for the player.",inputMethod:"boolean",icon:"invert-colors"}],advanced:[{property:"darkTranscript",title:"Dark theme for transcript",description:"Enable dark theme for the transcript.",inputMethod:"boolean"},{property:"hideTimestamps",title:"Hide timestamps",description:"Hide the time stamps on the transcript.",inputMethod:"boolean"},{property:"preload",title:"Preload source(s).",description:"How the sources should be preloaded, i.e. auto, metadata (default), or none.",inputMethod:"select",options:{preload:"Preload all media",metadata:"Preload media metadata only",none:"Don't preload anything"}},{property:"stickyCorner",title:"Sticky Corner",description:"Set the corner where a video plays when scrolled out of range, or choose none to disable sticky video.",inputMethod:"select",options:{none:"none","top-left":"top-left","top-right":"top-right","bottom-left":"bottom-left","bottom-right":"bottom-right"}},{property:"sources",title:"Other sources",description:"List of other sources",inputMethod:"array",properties:[{property:"src",title:"Source",description:"The URL for this video.",inputMethod:"textfield"},{property:"type",title:"Type",description:"Media type data",inputMethod:"select",options:{"audio/aac":"acc audio","audio/flac":"flac audio","audio/mp3":"mp3 audio","video/mp4":"mp4 video","video/mov":"mov video","audio/ogg":"ogg audio","video/ogg":"ogg video","audio/wav":"wav audio","audio/webm":"webm audio","video/webm":"webm video"}}]},{property:"tracks",title:"Track list",description:"Tracks of different languages of closed captions",inputMethod:"array",properties:[{property:"kind",title:"Kind",description:"Kind of track",inputMethod:"select",options:{subtitles:"subtitles"}},{property:"label",title:"Label",description:"The human-readable name for this track, eg. \"English Subtitles\"",inputMethod:"textfield"},{property:"src",title:"Source",description:"Source of the track",inputMethod:"textfield"},{property:"srclang",title:"Two letter, language code, eg. \"en\" for English, \"de\" for German, \"es\" for Spanish, etc.",description:"Label",inputMethod:"textfield"}]}]}})},_computeYoutubeId:function _computeYoutubeId(source,sourceType){if(source!==void 0&&"youtube"===sourceType){return this._computeSRC(source).replace(/(https?:\/\/)?(www.)?youtube(-nocookie)?.com\/embed\//,"")}return!1},_computeYoutube:function _computeYoutube(sourceType){return"youtube"===sourceType},_computeA11yMedia:function _computeA11yMedia(sourceType,sandboxed){if(!sandboxed&&("youtube"==sourceType||"local"==sourceType)){return!0}return!1},_computeIframed:function _computeIframed(sourceData,sandboxed){if(0<sourceData.length&&sourceData[0]!==void 0&&this._sourceIsIframe(sourceData[0].src)&&!sandboxed){return!0}return!1},_getSourceData:function _getSourceData(source,sources,tracks){for(var root=this,slotted=Polymer.dom(root).querySelector("track"),temp=sources.slice(),i=0;i<temp.length;i++){temp[i].type=temp[i].type!==void 0&&null!==temp[i].type?temp[i].type:this._computeMediaType(temp[i].src);temp[i].src=this._computeSRC(temp[i].src)}if(null!==source){var src=this._computeSRC(source);this.sourceType=this._computeSourceType(src);if("youtube"!==this.sourceType)temp.unshift({src:src,type:this._computeMediaType(src)})}this.__standAlone=tracks===void 0||null===tracks||0===tracks.length&&null===slotted;return temp},_computeMediaType:function _computeMediaType(source){var type="",findType=function(text,data){for(var i=0;i<data.length;i++){if(""===type&&null!==source&&-1<source.toLowerCase().indexOf("."+data[i]))type=text+"/"+data[i]}};findType("audio",["aac","flac","mp3","oga","wav"]);findType("video",["mov","mp4","ogv","webm"]);return type},_computeSandboxed:function _computeSandboxed(sourceData){if(0<sourceData.length&&sourceData[0]!==void 0&&this._sourceIsIframe(sourceData[0].src)){var test=document.createElement("webview");if("function"===typeof test.reload){return!0}}return!1},_computeSourceType:function _computeSourceType(sourceData){var root=this,slotted=Polymer.dom(root).querySelector("source");if(0<sourceData.length&&sourceData[0]!==void 0&&babelHelpers.typeof(sourceData[0].src)!=="undefined"){return root.getVideoType(sourceData[0].src)}else if(null!==slotted){var src=root._computeSRC(slotted.getAttribute("src"));return root.getVideoType(src)}else{return null}},_computeSRC:function _computeSRC(source){if(null!==source&&babelHelpers.typeof(source)!==void 0){var type=this.sourceType!==void 0?this.sourceType:this.getVideoType(source);source=this.cleanVideoSource(source,type);if("vimeo"==type){if(this.vimeoTitle){source+="?title=1"}else{source+="?title=0"}if(this.vimeoByline){source+="&byline=1"}else{source+="&byline=0"}if(this.vimeoPortrait){source+="&portrait=1"}else{source+="&portrait=0"}if(babelHelpers.typeof(this.videoColor)!=="undefined"){source+="&color="+this.videoColor}}else if("dailymotion"==type){source+="&ui-start-screen-info=false";source+="&ui-logo=false";source+="&sharing-enable=false";source+="&endscreen-enable=false";if(babelHelpers.typeof(this.videoColor)!=="undefined"){source+="&ui-highlight="+this.videoColor}}}return source}});</script></dom-module></body></html>