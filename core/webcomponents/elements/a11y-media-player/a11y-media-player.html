<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../paper-slider/paper-slider.html"><link rel="import" href="../simple-colors/simple-colors.html">
<script src="../screenfull/dist/screenfull.js"></script>
<link rel="import" href="a11y-media-behaviors.html"><link rel="import" href="a11y-media-video-loader.html"><link rel="import" href="a11y-media-play-button.html"><link rel="import" href="a11y-media-controls.html"><link rel="import" href="a11y-media-transcript.html"><link rel="import" href="a11y-media-transcript-controls.html"><link rel="import" href="a11y-media-utility.html"><link rel="import" href="a11y-media-youtube-utility.html"><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"><link rel="prefetch" href="../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="prefetch" href="../iron-flex-layout/iron-flex-layout.html"><link rel="prefetch" href="../iron-form-element-behavior/iron-form-element-behavior.html"><link rel="prefetch" href="../iron-range-behavior/iron-range-behavior.html"><link rel="prefetch" href="../paper-behaviors/paper-inky-focus-behavior.html"><link rel="prefetch" href="../iron-behaviors/iron-button-state.html"><link rel="prefetch" href="../iron-behaviors/iron-control-state.html"><link rel="prefetch" href="../paper-behaviors/paper-ripple-behavior.html"><link rel="prefetch" href="../paper-ripple/paper-ripple.html"><link rel="prefetch" href="../paper-input/paper-input.html"><link rel="prefetch" href="../iron-input/iron-input.html"><link rel="prefetch" href="../iron-a11y-announcer/iron-a11y-announcer.html"><link rel="prefetch" href="../iron-validatable-behavior/iron-validatable-behavior.html"><link rel="prefetch" href="../iron-meta/iron-meta.html"><link rel="prefetch" href="../paper-input/paper-input-behavior.html"><link rel="prefetch" href="../paper-input/paper-input-char-counter.html"><link rel="prefetch" href="../paper-styles/typography.html"><link rel="prefetch" href="../font-roboto/roboto.html"><link rel="prefetch" href="../paper-input/paper-input-addon-behavior.html"><link rel="prefetch" href="../paper-input/paper-input-container.html"><link rel="prefetch" href="../paper-styles/default-theme.html"><link rel="prefetch" href="../paper-styles/color.html"><link rel="prefetch" href="../paper-input/paper-input-error.html"><link rel="prefetch" href="../paper-progress/paper-progress.html"><link rel="prefetch" href="../simple-colors/simple-colors-utility.html"><link rel="prefetch" href="../screenfull/dist/screenfull.js"><link rel="prefetch" href="../responsive-utility/responsive-utility.html"><link rel="prefetch" href="../iron-resizable-behavior/iron-resizable-behavior.html"><link rel="prefetch" href="../paper-tooltip/paper-tooltip.html"><link rel="prefetch" href="../paper-listbox/paper-listbox.html"><link rel="prefetch" href="../iron-menu-behavior/iron-menu-behavior.html"><link rel="prefetch" href="../iron-selector/iron-multi-selectable.html"><link rel="prefetch" href="../iron-selector/iron-selectable.html"><link rel="prefetch" href="../iron-selector/iron-selection.html"><link rel="prefetch" href="../paper-item/paper-item.html"><link rel="prefetch" href="../paper-item/paper-item-behavior.html"><link rel="prefetch" href="../paper-item/paper-item-shared-styles.html"><link rel="prefetch" href="../paper-menu-button/paper-menu-button.html"><link rel="prefetch" href="../iron-dropdown/iron-dropdown.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-behavior.html"><link rel="prefetch" href="../iron-fit-behavior/iron-fit-behavior.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-manager.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-backdrop.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-scroll-manager.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-focusables-helper.html"><link rel="prefetch" href="../neon-animation/neon-animation-runner-behavior.html"><link rel="prefetch" href="../neon-animation/neon-animatable-behavior.html"><link rel="prefetch" href="../iron-dropdown/iron-dropdown-scroll-manager.html"><link rel="prefetch" href="../neon-animation/animations/fade-in-animation.html"><link rel="prefetch" href="../neon-animation/neon-animation-behavior.html"><link rel="prefetch" href="../neon-animation/animations/fade-out-animation.html"><link rel="prefetch" href="../paper-styles/shadow.html"><link rel="prefetch" href="../paper-menu-button/paper-menu-button-animations.html"><link rel="prefetch" href="../paper-toggle-button/paper-toggle-button.html"><link rel="prefetch" href="../paper-behaviors/paper-checked-element-behavior.html"><link rel="prefetch" href="../iron-checked-element-behavior/iron-checked-element-behavior.html"><link rel="prefetch" href="../dropdown-select/dropdown-select.html"><link rel="prefetch" href="../paper-dropdown-menu/paper-dropdown-menu.html"><link rel="prefetch" href="../iron-icon/iron-icon.html"><link rel="prefetch" href="../paper-dropdown-menu/paper-dropdown-menu-icons.html"><link rel="prefetch" href="../iron-iconset-svg/iron-iconset-svg.html"><link rel="prefetch" href="../paper-dropdown-menu/paper-dropdown-menu-shared-styles.html"><link rel="prefetch" href="a11y-media-button.html"><link rel="prefetch" href="../iron-icons/iron-icons.html"><link rel="prefetch" href="../iron-icons/av-icons.html"><link rel="prefetch" href="a11y-media-transcript-cue.html"><link rel="prefetch" href="../iron-a11y-keys/iron-a11y-keys.html"><link rel="prefetch" href="../simple-search/simple-search-content.html"><link rel="prefetch" href="../simple-search/simple-search.html"></head><body><dom-module id="a11y-media-player"><template><style is="custom-style">:host{width:100%;display:block;color:var(--simple-colors-foreground1);background-color:var(--simple-colors-background2);outline:1px solid var(--simple-colors-background3);}:host[dark]{outline:1px solid var(--simple-colors-background1);}:host #outerplayer, :host #outerplayer *{--a11y-media-color:var(--simple-colors-foreground2);--a11y-media-bg-color:var(--simple-colors-background2);--a11y-media-hover-color:var(--simple-colors-foreground1);--a11y-media-hover-bg-color:var(--simple-colors-background2);--a11y-media-accent-color:var(--simple-colors-accent-foreground4);--a11y-media-faded-accent-color:var(--simple-colors-accent-foreground5);--a11y-media-settings-menu-color:var(--a11y-media-color);--a11y-media-settings-menu-bg-color:var(--a11y-media-bg-color);--a11y-media-settings-menu-hover-color:var(--a11y-media-hover-color);--a11y-media-settings-menu-hover-bg-color:var(--a11y-media-hover-bg-color);--a11y-media-button-color:var(--a11y-media-color);--a11y-media-button-bg-color:var(--a11y-media-bg-color);--a11y-media-button-hover-color:var(--a11y-media-accent-color);--a11y-media-button-hover-bg-color:var(--a11y-media-hover-bg-color);--a11y-media-button-toggle-color:var(--a11y-media-faded-accent-color);--paper-toggle-button-unchecked-bar-color:var(--a11y-media-color);--paper-toggle-button-unchecked-button-color:var(--a11y-media-color);--paper-toggle-button-checked-bar-color:var(--a11y-media-accent-color);--paper-toggle-button-checked-button-color:var(--a11y-media-accent-color);--paper-slider-active-color:var(--a11y-media-accent-color);--paper-slider-secondary-color:var(--a11y-media-faded-accent-color);--paper-slider-pin-color:var(--a11y-media-faded-bg-color);--paper-slider-pin-start-color:var(--a11y-media-faded-bg-color);--paper-slider-pin-end-color:var(--a11y-media-faded-bg-color);--paper-slider-knob-color:var(--a11y-media-accent-color);--paper-slider-knob-start-color:var(--a11y-media-bg-color);--paper-slider-knob-end-color:var(--a11y-media-bg-color);--paper-slider-knob-border-color:var(--a11y-media-accent-color);--paper-slider-knob-start-border-color:var(--a11y-media-bg-color);--paper-slider-knob-end-border-color:var(--a11y-media-bg-color);}:host #outertranscript, :host #outertranscript *, :host #transcript{--a11y-media-transcript-color:var(--simple-colors-foreground1);--a11y-media-transcript-bg-color:var(--simple-colors-background1);--a11y-media-transcript-accent-color:var(--simple-colors-accent-foreground5);--a11y-media-transcript-faded-accent-color:var(--simple-colors-accent-foreground3);--a11y-media-transcript-active-cue-color:var(--simple-colors-foreground1);--a11y-media-transcript-active-cue-bg-color:var(--simple-colors-accent-background1);--a11y-media-transcript-focused-cue-color:var(--simple-colors-foreground1);--a11y-media-transcript-focused-cue-bg-color:var(--simple-colors-background2);--a11y-media-transcript-match-color:var(--simple-colors-background1);--a11y-media-transcript-match-bg-color:var(--simple-colors-accent-foreground3);--a11y-media-transcript-match-border-color:var(--simple-colors-accent-foreground1);--a11y-media-hover-color:var(--simple-colors-foreground1);--a11y-media-hover-bg-color:var(--simple-colors-background2);}:host #player{display:block;max-width:100%;transition:position 0.5s ease, max-width 1s ease;background-color:var(--simple-colors-background2);}:host #innerplayer{z-index:1;}:host #sources{display:flex;align-items:stretch;position:relative;}:host[no-height] #sources{display:none;}:host #controls,
      :host #slider, 
      :host #sources,
      :host #sources > *{width:100%;}:host #loader, 
      :host #youtube,
      :host #customcc,
      :host #customcctxt{position:absolute;top:0;left:0;}:host #youtube{height:100%;}:host #customcc{font-size:20px;width:100%;height:100%;transition:font-size 0.25s;}:host[responsive-size*="lg"] #customcc{font-size:14px;}:host[responsive-size*="md"] #customcc{font-size:14px;}:host[responsive-size*="sm"] #customcc{font-size:12px;}:host[responsive-size*="xs"] #customcc{font-size:10px;}:host[sticky]:not([sticky-corner="none"]) #customcc{display:none;}:host #customcctxt{top:unset;bottom:0.5em;display:inline-block;margin:0 10px;color:white;background-color:black;background-color:rgba(0, 0, 0, 0.8);padding:0.15em 0.25em;}:host #customcctxt:empty{display:none;}:host #innerplayer,
      :host #sources > *{max-height:80vh;}:host #controls,
      :host #slider{z-index:2 !important;}:host #audio-only{text-align:center;font-style:italic;width:100%;line-height:160%;}:host .media-caption:not(:empty){padding:5px 15px;}:host #printthumb{width:100%;margin:0;display:block;border-top:1px solid #aaaaaa;}@media screen{:host #printthumb{display:none;}:host[flex-layout]:not([responsive-size*="s"]){display:inline-flex;align-items:stretch;outline:1px solid;color:var(--simple-colors-foreground1);background-color:var(--simple-colors-background2);outline-color:var(--simple-colors-background3);padding:0;}:host[dark][flex-layout]:not([responsive-size*="s"]){outline-color:var(--simple-colors-background1);}:host > div{transition:all 0.5s;}:host[sticky]:not([sticky-corner="none"]) #player{position:fixed;top:5px;right:5px;width:200px;max-width:200px;z-index:999999;border:1px solid;box-shadow:1px 1px 20px 1px rgba(125,125,125);border-radius:0.2em;border-color:var(--a11y-media-bg-color);}:host[dark][sticky]:not([sticky-corner="none"]) #player{border-color:var(--a11y-media-bg-color);}:host[sticky][sticky-corner="top-left"] #player{right:unset;left:5px;}:host[flex-layout]:not([responsive-size*="s"]) > div{width:50%;flex-grow:1;flex-shrink:1;}:host #innertranscript{position:relative;height:100%;}:host[hide-transcript] #outerplayer{min-width:50%;max-width:100%;}:host[hide-transcript] #outertranscript{display:none;}:host #transcript{padding-top:48px;}:host:not([no-height]):not([stacked-layout]):not([responsive-size*="s"]) #transcript{position:absolute;top:0;left:0;right:0;bottom:0;overflow-y:scroll;}:host:not([no-height]):not([stacked-layout]):not([responsive-size*="s"]) #player.totop{position:absolute;top:0;left:0;width:200px !important;z-index:9999;}:host #tcontrols{z-index:1000;position:absolute;top:0;left:0;width:100%;display:flex;}:host[sticky][sticky-corner="bottom-left"] #player{top:unset;right:unset;bottom:5px;}:host[sticky][sticky-corner="bottom-right"] #player{top:unset;bottom:5px;}:host[sticky]:not([sticky-corner="none"]):not([no-height]):not([stacked-layout]):not([responsive-size*="s"]) #controls{display:none;}:host .print-only{display:none;}:host .media-caption:not(:empty){color:var(--simple-colors-background1);background-color:var(--simple-colors-accent-foreground1);}}@media print{:host, :host[dark]{outline:1px solid #aaaaaa;background-color:#ffffff;}:host[sticky]:not([sticky-corner="none"]) #outerplayer{height:unset !important;}:host .screen-only,
        :host #player, 
        :host #printthumb:not([src]){display:none;}:host:not([thumbnail-src]) #sources, 
        :host #slider, 
        :host #loader, 
        :host #youtube,
        :host #controls{display:none;}:host .media-type{font-style:italic;}:host #searchbar{display:none;}:host .media-caption:not(:empty){background-color:#cccccc;color:#000000;font-size:120%;padding:5px 15px;}}</style><div id="outerplayer" lang$="[[uiLanguage]]"><div id="player"><div id="innerplayer"><div id="sources" hidden$="[[noHeight]]"><a11y-media-play-button id="playbutton" audio-only$="[[audioOnly]]" disabled="true" hidden$="[[noPlayButton]]" disabled$="[[noPlayButton]]" pause-label$="[[pauseLabel]]" playing$="[[__playing]]" play-label$="[[playLabel]]"></a11y-media-play-button><a11y-media-video-loader id="loader" autoplay$="[[autoplay]]" cc$="[[cc]]" crossorigin$="[[crossorigin]]" hidden$="[[isYoutube]]" lang$="[[lang]]" loop$="[[loop]]" muted$="[[muted]]" manifest$="[[manifest]]" playback-rate$="[[playbackRate]]" style$="[[_getThumbnailCSS(thumbnailSrc)]]" preload$="[[preload]]" volume$="[[volume]]"><slot></slot></a11y-media-video-loader><div id="youtube" hidden$="[[!isYoutube]]" video-id$="[[videoId]]"></div><div id="customcc" hidden$="[[!showCustomCaptions]]"><span id="customcctxt"></span></div></div></div><paper-slider id="slider" max$="[[__duration]]" pin="" secondary-progress$="[[__buffered]]" value$="[[__elapsed]]"></paper-slider></div><a11y-media-controls id="controls" audio-only$="[[audioOnly]]" audio-label$="[[audioLabel]]" captions-icon$="[[captionsIcon]]" captions-label$="[[captionsLabel]]" captions-menu-label$="[[captionsMenuLabel]]" captions-menu-off$="[[captionsMenuOff]]" cc$="[[cc]]" forward-icon$="[[forwardIcon]]" forward-label$="[[forwardLabel]]" fullscreen-icon$="[[fullscreenIcon]]" fullscreen-label$="[[fullscreenLabel]]" has-captions$="[[hasCaptions]]" has-transcript$="[[hasTranscript]]" lang$="[[uiLanguage]]" loop-icon$="[[loopIcon]]" loop-label$="[[loopLabel]]" mute-icon$="[[muteIcon]]" mute-label$="[[muteLabel]]" muted$="[[muted]]" pause-icon$="[[pauseIcon]]" pause-label$="[[pauseLabel]]" play-icon$="[[playIcon]]" play-label$="[[playLabel]]" playing$="[[__playing]]" restart-icon$="[[restartIcon]]" restart-label$="[[restartLabel]]" rewind-icon$="[[rewindIcon]]" rewind-label$="[[rewindLabel]]" search-transcript$="[[searchTranscript]]" settings-icon$="[[settingsIcon]]" settings-label$="[[settingsLabel]]" speed-label$="[[speedLabel]]" stand-alone$="[[standAlone]]" transcript-icon$="[[transcriptIcon]]" transcript-label$="[[transcriptLabel]]" transcript-menu-label$="[[transcriptMenuLabel]]" unmute-icon$="[[unmuteIcon]]" unmute-label$="[[unmuteLabel]]" video-label$="[[videoLabel]]" volume="[[__volume]]" volume-icon$="[[volumeIcon]]" volume-label$="[[volumeLabel]]"></a11y-media-controls><div class="screen-only media-caption">[[mediaCaption]]</div><div class="print-only media-caption">[[printCaption]]</div></div><img id="printthumb" aria-hidden="true" src$="[[thumbnailSrc]]"><div id="outertranscript" hidden$="[[standAlone]]" lang$="[[uiLanguage]]"><div id="innertranscript"><a11y-media-transcript-controls id="tcontrols" accent-color$="[[accentColor]]" auto-scroll-icon$="[[autoScrollIcon]]" auto-scroll-label$="[[autoScrollLabel]]" dark$="[[darkTranscript]]" disable-print-button$="[[disablePrintButton]]" disable-scroll$="[[disableScroll]]" disable-search$="[[disableSearch]]" lang$="[[uiLanguage]]" print-icon$="[[printIcon]]" print-label$="[[printLabel]]" search-label$="[[searchLabel]]" search-prev-label$="[[searchPrevLabel]]" search-prev-icon$="[[searchPrevIcon]]" search-next-label$="[[searchNextLabel]]" search-next-icon$="[[searchNextIcon]]" skip-transcript-link$="[[skipTranscriptLink]]"></a11y-media-transcript-controls><a11y-media-transcript id="transcript" accent-color$="[[accentColor]]" dark$="[[darkTranscript]]" disable-scroll$="[[disableScroll]]" disable-search$="[[disableSearch]]" disable-interactive$="[[disableInteractive]]" hide-timestamps$="[[hideTimestamps]]" search="[[search]]"></a11y-media-transcript></div></div></template><script>Polymer({is:"a11y-media-player",listeners:{"controls-change":"_onControlsChanged","play-button-tapped":"play"},properties:{mediaCaption:{type:String,computed:"_getMediaCaption(audioOnly,audioLabel,mediaTitle)"},printCaption:{type:String,computed:"_getPrintCaption(audioOnly,audioLabel,videoLabel,mediaTitle)"}},behaviors:[simpleColorsBehaviors,a11yMediaBehaviors.MediaProps,a11yMediaBehaviors.GeneralFunctions,a11yMediaBehaviors.PlayerBehaviors,a11yMediaBehaviors.TranscriptBehaviors],attached:function attached(){this.__playerAttached=!0;Polymer.SimpleColorsUtility.requestAvailability();Polymer.A11yMediaUtility.requestAvailability();this._addResponsiveUtility();this.fire("a11y-player",this);if(this.isYoutube){Polymer.A11yMediaYoutubeUtility.requestAvailability();this._youTubeRequest()}},ready:function ready(){var _this=this,root=this;root.__playerReady=!0;root.__interactive=!root.disableInteractive;root.target=root.$$("#transcript");root.__status=root.loadingLabel;root.__slider=root.$.slider;root.__volume=root.muted?0:Math.max(this.volume,10);root.__resumePlaying=!1;root.__showFullscreen=!this.disableFullscreen&&screenfull.enabled;root.__duration=0;root.$.controls.setStatus(root.__status);var aspect=16/9;root.width=null!==root.width?root.width:"100%";root.style.maxWidth=null!==root.width?root.width:"100%";root.$.sources.style.paddingTop=100/aspect+"%";if(this.isYoutube){root.disableInteractive=!0;this._youTubeRequest()}else{root.__media=root.$.loader;root.__media.addEventListener("media-loaded",function(){aspect=root.__media.aspectRatio;root.$.sources.style.paddingTop=100/aspect+"%";root.$.playbutton.removeAttribute("disabled");root.__duration=0<root.__media.duration?root.__media.duration:0;root.__status=root._getHHMMSS(0,root.__media.duration)+"/"+root._getHHMMSS(root.__media.duration);root.$.controls.setStatus(root.__status);root._getTrackData(root.$.loader.media)})}root.$.tcontrols.addEventListener("searchbar-added",function(e){root.search=e.detail});root.$.tcontrols.addEventListener("toggle-scroll",function(){root.disableScroll=!root.disableScroll});root.$.tcontrols.addEventListener("print-transcript",function(){this.fire("printing-transcript",this);root.$.transcript.print(root.mediaTitle)});root.$.transcript.setMedia(root.$.player);if(root.__showFullscreen){screenfull.on("change",function(){_this.fullscreen=screenfull.isFullscreen})}root.$.slider.addEventListener("dragging-changed",function(){_this._toggleSliderSeek(root.$.slider.dragging,root.$.slider.immediateValue)});root.$.slider.addEventListener("focused-changed",function(){_this._toggleSliderSeek(root.$.slider.focused,root.$.slider.value)})},_getThumbnailCSS:function _getThumbnailCSS(thumbnailSrc){return null!=thumbnailSrc?"background-image: url("+thumbnailSrc+"); background-size: cover;":null},_toggleSliderSeek:function _toggleSliderSeek(seeking,value){if(seeking){if(this.__playing)this.__resumePlaying=!0;this.pause()}else{this.seek(value);this.__resumePlaying=!1}},_youTubeRequest:function _youTubeRequest(){var root=this;if(root.__playerAttached&&root.__playerReady){var options={width:"100%",height:"100%",videoId:root.youtubeId},ytInit=function(){root.__media=Polymer.A11yMediaYoutubeUtility.initYoutubePlayer(root.$.youtube,options);root._getTrackData(root.$.loader.media);root._updateCustomTacks();var int=setInterval(function(){if(root.__media.getDuration!==void 0){clearInterval(int);root.__duration=root.__media.duration=root.__media.getDuration();root.__status=root._getHHMMSS(0,root.__media.duration)+"/"+root._getHHMMSS(root.__media.duration);root.$.controls.setStatus(root.__status);root.disableInteractive=!root.__interactive}},100)},checkApi=function(){if(Polymer.A11yMediaYoutubeUtility.apiReady){document.removeEventListener("youtube-api-ready",checkApi);ytInit()}};if(Polymer.A11yMediaYoutubeUtility.apiReady){ytInit()}else{document.addEventListener("youtube-api-ready",checkApi)}}},_updateCustomTacks:function _updateCustomTacks(){if(this.isYoutube&&this.tracks!==void 0&&null!==this.tracks){var root=this,track=root.tracks[this.$.transcript.selectedTranscript],active=[],caption="";if(track!==void 0&&null!==track&&track.cues!==void 0&&null!==track.cues){for(var i=0;i<track.cues.length;i++){if(track.cues[i].seek<root.__elapsed&&track.cues[i].seekEnd>root.__elapsed){active.push(track.cues[i].order);caption=""===caption?track.cues[i].text:caption}}root.$.customcctxt.innerText=caption;root.$.transcript.setActiveCues(active)}}},play:function play(e){var root=this;root.__playing=!0;if(e===void 0||e.detail===root.$.playbutton){root.__playProgress=setInterval(function(){root.__elapsed=0<root.__media.getCurrentTime()?root.__media.getCurrentTime():0;root.__duration=0<root.__media.duration?root.__media.duration:0;root._updateCustomTacks();root.__status=root._getHHMMSS(root.__media.getCurrentTime(),root.__duration)+"/"+root._getHHMMSS(root.__duration);root.$.controls.setStatus(root.__status);if(root.__elapsed===root.__duration&&!root.loop){root.__playing=!1;clearInterval(root.__playProgress)}root.__buffered=root.__media.getBufferedTime},1);root.fire("a11y-player-playing",root);root.__media.play()}},pause:function pause(){var root=this;root.__playing=!1;root.__media.pause();clearInterval(root.__playProgress)},stop:function stop(){this.pause();this.seek(0)},restart:function restart(){this.seek(0);this.play()},rewind:function rewind(amt){amt=amt!==void 0?amt:1;this.seek(Math.max(this.__media.getCurrentTime()-amt,0))},forward:function forward(amt){amt=amt!==void 0?amt:1;this.seek(Math.min(this.__media.getCurrentTime()+amt,this.__duration))},seek:function seek(time){var seekable=this.__media.seekable;if(0<seekable.length&&time>=seekable.start(0)&&time<=seekable.end(0)){this.__media.seek(time);this.__elapsed=time;this.__status=this._getHHMMSS(this.__media.getCurrentTime(),this.__duration)+"/"+this._getHHMMSS(this.__duration);this.$.controls.setStatus(this.__status);this._updateCustomTacks();if(this.__resumePlaying)this.play()}},toggleCC:function toggleCC(mode){this.cc=mode===void 0?!this.cc:mode;this.$.loader.setCC(this.cc)},setVolume:function setVolume(value){this.volume=null!==value?value:70;this.__media.setVolume(this.volume);this.muted=0===this.volume},setPlaybackRate:function setPlaybackRate(value){value=null!==value?value:1;this.__media.setPlaybackRate(value)},toggleAutoplay:function toggleAutoplay(mode){if(!this.isYoutube){this.autoplay=mode===void 0?!this.muted:mode;this.__media.setAutoplay(this.autoplay)}},toggleLoop:function toggleLoop(mode){if(!this.isYoutube){this.loop=mode===void 0?!this.loop:mode;this.__media.setLoop(this.loop)}},toggleMute:function toggleMute(mode){this.muted=mode===void 0?!this.muted:mode;this.__volume=this.muted?0:Math.max(this.volume,10);this.__media.setMute(this.muted)},toggleSticky:function toggleSticky(mode){mode=mode===void 0?!this.sticky:mode;this.sticky=mode;this.fire("player-sticky",this)},toggleTranscript:function toggleTranscript(mode){mode=mode===void 0?this.hideTranscript:mode;this.hideTranscript=!mode;if(this.$.transcript!==void 0&&null!==this.$.transcript){this.fire("transcript-toggle",this);this.$.transcript.toggleHidden(this.hideTranscript)}},selectTrack:function selectTrack(index){this.$.loader.selectTrack(index);this.$.transcript.setActiveTranscript(index)},_getMediaCaption:function _getMediaCaption(audioOnly,audioLabel,mediaTitle){var hasMediaTitle=mediaTitle!==void 0&&null!==mediaTitle&&""!==mediaTitle;if(audioOnly&&hasMediaTitle){return mediaTitle+" ("+audioLabel+")"}else if(audioOnly){return audioLabel}else if(hasMediaTitle){return mediaTitle}else{return null}},_getPrintCaption:function _getPrintCaption(audioOnly,audioLabel,videoLabel,mediaTitle){var hasMediaTitle=mediaTitle!==void 0&&null!==mediaTitle&&""!==mediaTitle;if(audioOnly&&hasMediaTitle){return mediaTitle+" ("+audioLabel+")"}else if(audioOnly){return audioLabel}else if(hasMediaTitle){return mediaTitle+" ("+videoLabel+")"}else{return videoLabel}},_getTrackData:function _getTrackData(){var root=this,media=root.$.loader.media,tdata=[];root.hasTranscript=!root.standAlone;for(var _loop=function(i){if(null!==media.textTracks[i]){var track=media.textTracks[i],tidata={},loaded=track.cues!==void 0,label=track.label,lang=track.language,text=label!==void 0?label:lang!==void 0?lang:"Track "+i,loadCueData=setInterval(function(){track.mode="showing";if(track.cues!==void 0&&0<track.cues.length){track.mode="hidden";getCueData();clearInterval(loadCueData)}},1),getCueData=function(){track.mode="hidden";var cues=Object.keys(track.cues).map(function(key){return{order:""!==track.cues[key].id?track.cues[key].id:key,seek:track.cues[key].startTime,seekEnd:track.cues[key].endTime,start:root._getHHMMSS(track.cues[key].startTime,root.media.duration),end:root._getHHMMSS(track.cues[key].endTime,root.media.duration),text:track.cues[key].text}});tidata={text:text,language:lang,value:i,cues:cues};tdata.push(tidata);root.set("tracks",tdata);root.$.controls.setTracks(tdata);root.$.transcript.setTracks(tdata);root.selectTrack(track.default?i:0);track.oncuechange=function(e){root.$.transcript.setActiveCues(Object.keys(e.currentTarget.activeCues).map(function(key){return e.currentTarget.activeCues[key].id}))}}}},i=0;i<media.textTracks.length;i++){_loop(i)}if(0<media.textTracks.length){root.hasCaptions=!0}else{root.standAlone=!0}if(!root.standAlone&&root.$.transcript!==void 0&&null!==root.$.transcript){root.$.transcript.addEventListener("cue-seek",function(e){root.__resumePlaying=root.__playing;root.seek(e.detail.cue.seek)})}},_onControlsChanged:function _onControlsChanged(e){var root=this,action=e.detail.label!==void 0?e.detail.label:e.detail.id;if("backward"===action||action===root.rewindLabel){root.rewind(root.__duration/20)}else if("closed captions"===action||"captions"===action||action===root.captionsLabel||action===root.captionsMenuLabel){root.toggleCC()}else if("transcript"===action||"transcript-toggle"===action||action===root.transcriptLabel||action===root.transcriptMenuLabel){root.toggleTranscript()}else if("tracks"===e.detail.id){if(""===e.detail.value){root.toggleCC(!1)}else{root.toggleCC(!0);root.selectTrack(e.detail.value)}}else if("forward"===action||action===root.forwardLabel){root.forward(root.__duration/20)}else if("full screen"===action||action===root.fullscreenLabel){this.toggleTranscript(this.fullscreen);screenfull.toggle(root.$.outerplayer)}else if("loop"===action||action===root.loopLabel){root.toggleLoop()}else if("mute"===action||"unmute"===action||action===root.muteLabel||action===root.unmuteLabel){root.toggleMute()}else if("pause"===action||action===root.pauseLabel){root.pause()}else if("play"===action||action===root.playLabel){root.play()}else if("restart"===action||action===root.restartLabel){root.seek(0);root.play()}else if("speed"===action||action===root.speedLabel){root.setPlaybackRate(e.detail.value)}else if("volume"===action||action===root.volumeLabel){root.setVolume(e.detail.value)}}});</script></dom-module></body></html>