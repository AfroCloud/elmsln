<html><head></head><body><dom-module id="vaadin-grid-column-reordering-themability-styles"><template><style>vaadin-grid-table[reordering] .vaadin-grid-cell{background:#000;}:host([reordering]) .vaadin-grid-cell[reorder-status="dragging"]{background:var(--primary-color, #000);}vaadin-grid-table[reordering] .vaadin-grid-cell:not([detailscell]) ::slotted(vaadin-grid-cell-content){transition:opacity 300ms;transform:translateZ(0);opacity:0.8;}#scroller .vaadin-grid-cell[reorder-status="allowed"] ::slotted(vaadin-grid-cell-content){opacity:1;}#scroller .vaadin-grid-cell[reorder-status="dragging"]{background:var(--primary-color, #000);}#scroller .vaadin-grid-cell[reorder-status="dragging"] ::slotted(vaadin-grid-cell-content){opacity:0.95;}</style></template></dom-module><script>window.vaadin=window.vaadin||{};vaadin.elements=vaadin.elements||{};vaadin.elements.grid=vaadin.elements.grid||{};vaadin.elements.grid.ColumnReorderingBehavior={properties:{columnReorderingAllowed:{type:Boolean,value:!1}}};vaadin.elements.grid.TableColumnReorderingBehavior={properties:{_orderBaseScope:{type:Number,value:1e7}},listeners:{dragstart:"_onDragStart",dragover:"_onDragOver",dragend:"_onDragEnd"},observers:["_updateOrders(columnTree, columnTree.*)"],_updateOrders:function _updateOrders(columnTree,splices){if(columnTree===void 0||splices===void 0){return}columnTree[0].forEach(function(column,index){column._order=(index+1)*this._orderBaseScope},this)},_onDragStart:function _onDragStart(e){if("vaadin-grid-cell-content"!==e.target.localName){return}var cell=this._getCellByCellContent(e.target);if(cell){this.toggleAttribute("reordering",!0);this._draggedColumn=cell.column;this._setSiblingsReorderStatus(this._draggedColumn,"allowed");this._draggedColumn._reorderStatus="dragging";if(e.dataTransfer){e.dataTransfer.setData("text","");e.dataTransfer.effectAllowed="move"}this._autoScroller()}},_setSiblingsReorderStatus:function _setSiblingsReorderStatus(column,status){Array.prototype.filter.call(Polymer.dom(Polymer.dom(column).parentNode).children,function(child){return /column/.test(child.localName)&&this._isSwapAllowed(child,column)},this).forEach(function(sibling){sibling._reorderStatus=status})},_onDragOver:function _onDragOver(e){if(!this._draggedColumn){return}var path=Polymer.Element?e.composedPath():Polymer.dom(e).path,cellContent=path.filter(function(el){return"vaadin-grid-cell-content"===el.localName})[0];if(!cellContent){return}e.preventDefault();var targetCell=this._getCellByCellContent(cellContent),targetColumn=this._getTargetColumn(targetCell,this._draggedColumn);if(targetColumn&&this._isSwapAllowed(this._draggedColumn,targetColumn)&&this._isSwappableByPosition(targetColumn,e.clientX)){this._swapColumnOrders(this._draggedColumn,targetColumn)}this._lastDragClientX=e.clientX},_autoScroller:function _autoScroller(){if(this._lastDragClientX){var rightDiff=this._lastDragClientX-this.getBoundingClientRect().right+50,leftDiff=this.getBoundingClientRect().left-this._lastDragClientX+50;if(0<rightDiff){this.$.table.scrollLeft+=rightDiff/10}else if(0<leftDiff){this.$.table.scrollLeft-=leftDiff/10}this._scrollHandler()}if(this._draggedColumn){this.async(this._autoScroller,10)}},_onDragEnd:function _onDragEnd(){if(!this._draggedColumn){return}this.toggleAttribute("reordering",!1);this._draggedColumn._reorderStatus="";this._setSiblingsReorderStatus(this._draggedColumn,"");this._draggedColumn=null;this._lastDragClientX=null},_isSwapAllowed:function _isSwapAllowed(column1,column2){if(column1&&column2){var sameParent=column1.parentElement===column2.parentElement,sameFrozen=column1.frozen===column2.frozen;return column1!==column2&&sameParent&&sameFrozen}},_isSwappableByPosition:function _isSwappableByPosition(targetColumn,clientX){var targetCell=Array.prototype.filter.call(Polymer.dom(this.$.header).querySelectorAll(".vaadin-grid-cell"),function(cell){return cell.column===targetColumn})[0],sourceCellRect=this.$.header.querySelector("[reorder-status=dragging]").getBoundingClientRect();if(targetCell.getBoundingClientRect().left>sourceCellRect.left){return clientX>targetCell.getBoundingClientRect().right-sourceCellRect.width}else{return clientX<targetCell.getBoundingClientRect().left+sourceCellRect.width}},_getCellByCellContent:function _getCellByCellContent(cellContent){if(Polymer.Element){return cellContent.assignedSlot.parentNode}else{var insertionPoint=Polymer.dom(cellContent).getDestinationInsertionPoints()[0];return Polymer.dom(insertionPoint).parentNode}},_swapColumnOrders:function _swapColumnOrders(column1,column2){var _order=column1._order;column1._order=column2._order;column2._order=_order;this._updateLastFrozen();this._updateLastColumn()},_getTargetColumn:function _getTargetColumn(targetCell,draggedColumn){if(targetCell&&draggedColumn){var candidate=targetCell.column;while(candidate.parentElement!==draggedColumn.parentElement&&candidate!==this.target){candidate=candidate.parentElement}if(candidate.parentElement===draggedColumn.parentElement){return candidate}else{return targetCell.column}}}};</script></body></html>