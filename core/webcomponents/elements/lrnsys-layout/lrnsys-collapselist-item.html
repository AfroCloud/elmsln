

<!--
`lrnsys-collapselist-item`


@demo demo/index.html
-->

<dom-module id="lrnsys-collapselist-item">
  <template>
    <style>
      :host {
        display: block;
      }
      paper-button {
        height: 3em;
        padding: 0;
        margin: 0;
        min-width: .1em;
        -webkit-justify-content: flex-start;
        justify-content: flex-start;
        align-items: center;
        width: 100%;
        text-transform: unset;
        border-radius: 0;
        border-bottom: 1px solid var(--lrnsys-collapselist-item-border, --paper-grey-300);
        background-color: var(--lrnsys-collapselist-item-color, --paper-grey-100)
      }
      paper-button span {
        pointer-events: none;
      }
      .collapse-label {
        padding: .75em .5em .25em .5em;
        width: 100%;
        height: 2em;
      }
      :host[opened] #collapse {
        border-bottom: 1px solid var(--lrnsys-collapselist-item-border, --paper-grey-300);
      }
      :host[opened] .collapse-label {
        font-weight: bold;
        background-color: var(--lrnsys-collapselist-item-active-color, --paper-grey-200)
      }
      .collapse-content {
        padding: 1em;
      }
      .label-area {
        display: inline-block;
        width: 85%;
      }
      .collapse-icon-container {
        display: inline-block;
        width: 10%;
      }
      .collapse-icon {
        width: 16px;
        height: 16px;
      }
    </style>
    <paper-button on-tap="collapseToggle" id="collapse-trigger">
      <span class="collapse-label">
        <div class="label-area"><slot name="label"></slot></div>
        <div class="collapse-icon-container"><iron-icon icon="[[stateIcon]]" class="collapse-icon"></iron-icon></div>
      </span>
    </paper-button>
    <iron-collapse id="collapse" opened="{{opened}}">
      <div class="collapse-content">
        <slot name="content"></slot>
      </div>
    </iron-collapse>
  </template>

  <script>
    Polymer({
      is: 'lrnsys-collapselist-item',
      properties: {
        /**
         * Whether or not this is default open on render.
         */
        opened: {
          type: Boolean,
          value: false,
          reflectToAttribute: true,
          notify: true,
        },
        /**
         * Icon to show in order to reflect state of the collapse.
         */
        stateIcon: {
          type: String,
          computed: '_computeStateIcon(opened)',
        },
      },
      /**
       * Match icon to the current state of the collapse.
       */
      _computeStateIcon: function (opened) {
        if (opened) {
          return 'unfold-less';
        }
        return 'unfold-more';
      },
      /**
       * Toggling collapse on an iron element.
       */
      collapseToggle: function(e) {
        this.$.collapse.toggle();
      }
    });
  </script>
</dom-module>
