<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html"><link rel="import" href="../app-localize-behavior/app-localize-behavior.html"><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"><link rel="prefetch" href="../iron-ajax/iron-ajax.html"><link rel="prefetch" href="../iron-ajax/iron-request.html"><link rel="prefetch" href="../intl-messageformat/dist/intl-messageformat.min.js"><link rel="prefetch" href="../iron-icons/iron-icons.html"><link rel="prefetch" href="../iron-icon/iron-icon.html"><link rel="prefetch" href="../iron-meta/iron-meta.html"><link rel="prefetch" href="../iron-flex-layout/iron-flex-layout.html"><link rel="prefetch" href="../iron-iconset-svg/iron-iconset-svg.html"><link rel="prefetch" href="../iron-icons/editor-icons.html"><link rel="prefetch" href="../paper-icon-button/paper-icon-button.html"><link rel="prefetch" href="../paper-behaviors/paper-inky-focus-behavior.html"><link rel="prefetch" href="../iron-behaviors/iron-button-state.html"><link rel="prefetch" href="../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="prefetch" href="../iron-behaviors/iron-control-state.html"><link rel="prefetch" href="../paper-behaviors/paper-ripple-behavior.html"><link rel="prefetch" href="../paper-ripple/paper-ripple.html"><link rel="prefetch" href="../paper-styles/default-theme.html"><link rel="prefetch" href="../paper-styles/color.html"><link rel="prefetch" href="../paper-collapse-item/paper-collapse-item.html"><link rel="prefetch" href="../iron-collapse/iron-collapse.html"><link rel="prefetch" href="../iron-resizable-behavior/iron-resizable-behavior.html"><link rel="prefetch" href="../paper-item/paper-item-body.html"><link rel="prefetch" href="../paper-styles/typography.html"><link rel="prefetch" href="../font-roboto/roboto.html"><link rel="prefetch" href="../paper-styles/paper-styles.html"><link rel="prefetch" href="../paper-styles/shadow.html"><link rel="prefetch" href="../paper-collapse-item/simple-paper-item.html"><link rel="prefetch" href="../paper-item/paper-item-behavior.html"><link rel="prefetch" href="../paper-item/paper-item-shared-styles.html"><link rel="prefetch" href="../paper-collapse-item/paper-collapse-group.html"><link rel="prefetch" href="../paper-checkbox/paper-checkbox.html"><link rel="prefetch" href="../paper-behaviors/paper-checked-element-behavior.html"><link rel="prefetch" href="../iron-checked-element-behavior/iron-checked-element-behavior.html"><link rel="prefetch" href="../iron-validatable-behavior/iron-validatable-behavior.html"><link rel="prefetch" href="../iron-form-element-behavior/iron-form-element-behavior.html"><link rel="prefetch" href="../paper-dropdown-menu/paper-dropdown-menu.html"><link rel="prefetch" href="../paper-input/paper-input.html"><link rel="prefetch" href="../iron-input/iron-input.html"><link rel="prefetch" href="../iron-a11y-announcer/iron-a11y-announcer.html"><link rel="prefetch" href="../paper-input/paper-input-behavior.html"><link rel="prefetch" href="../paper-input/paper-input-char-counter.html"><link rel="prefetch" href="../paper-input/paper-input-addon-behavior.html"><link rel="prefetch" href="../paper-input/paper-input-container.html"><link rel="prefetch" href="../paper-input/paper-input-error.html"><link rel="prefetch" href="../paper-menu-button/paper-menu-button.html"><link rel="prefetch" href="../iron-dropdown/iron-dropdown.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-behavior.html"><link rel="prefetch" href="../iron-fit-behavior/iron-fit-behavior.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-manager.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-backdrop.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-scroll-manager.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-focusables-helper.html"><link rel="prefetch" href="../neon-animation/neon-animation-runner-behavior.html"><link rel="prefetch" href="../neon-animation/neon-animatable-behavior.html"><link rel="prefetch" href="../iron-dropdown/iron-dropdown-scroll-manager.html"><link rel="prefetch" href="../neon-animation/animations/fade-in-animation.html"><link rel="prefetch" href="../neon-animation/neon-animation-behavior.html"><link rel="prefetch" href="../neon-animation/animations/fade-out-animation.html"><link rel="prefetch" href="../paper-menu-button/paper-menu-button-animations.html"><link rel="prefetch" href="../paper-dropdown-menu/paper-dropdown-menu-icons.html"><link rel="prefetch" href="../paper-dropdown-menu/paper-dropdown-menu-shared-styles.html"><link rel="prefetch" href="../paper-menu/paper-menu.html"><link rel="prefetch" href="../iron-menu-behavior/iron-menu-behavior.html"><link rel="prefetch" href="../iron-selector/iron-multi-selectable.html"><link rel="prefetch" href="../iron-selector/iron-selectable.html"><link rel="prefetch" href="../iron-selector/iron-selection.html"><link rel="prefetch" href="../paper-menu/paper-menu-shared-styles.html"><link rel="prefetch" href="../paper-item/paper-item.html"><link rel="prefetch" href=""><link rel="prefetch" href="../paper-button/paper-button.html"><link rel="prefetch" href="../paper-behaviors/paper-button-behavior.html"><link rel="prefetch" href="../paper-styles/element-styles/paper-material-styles.html"><link rel="prefetch" href="../iron-icons/communication-icons.html"><link rel="prefetch" href="../geo-location/geo-location.html"><link rel="prefetch" href="../google-map/google-map.html"><link rel="prefetch" href="../google-apis/google-maps-api.html"><link rel="prefetch" href="../iron-jsonp-library/iron-jsonp-library.html"><link rel="prefetch" href="../iron-selector/iron-selector.html"><link rel="prefetch" href="../google-map/google-map-marker.html"></head><body><dom-module id="eco-json-schema-object"><link rel="import" href="./eco-json-schema-array.html"><link rel="import" href="./eco-json-schema-boolean.html"><link rel="import" href="./eco-json-schema-enum.html"><link rel="import" href="./eco-json-schema-file.html"><link rel="import" href="./eco-json-schema-geolocation.html"><link rel="import" href="./eco-json-schema-input.html"><template><style is="custom-style" include="iron-flex iron-flex-alignment">div.layout{height:auto;}#form{display:block;@apply (--eco-json-schema-object-form);@apply (--layout-vertical);@apply (--layout-wrap);}</style><template is="dom-if" if="{{!wizard}}"><div class="header" hidden$="[[!label]]">[[label]]</div></template><div class="layout vertical flex start-justified"><div id="form" class="layout horizontal flex start-justified"></div></div></template><script>Polymer({is:"eco-json-schema-object",behaviors:[Polymer.AppLocalizeBehavior],properties:{language:{value:"en"},resources:{value:function value(){return{}}},schema:{type:Object,observer:"_schemaChanged"},label:{type:String},value:{type:Object,notify:!0,value:function value(){return{}}},error:{type:Object,observer:"_errorChanged"},wizard:{type:Boolean,notify:!0}},detached:function detached(){this._clearForm()},_buildSchemaProperties:function _buildSchemaProperties(){var ctx=this;this._schemaProperties=Object.keys(this.schema.properties||[]).map(function(key){var schema=ctx.schema.properties[key],property={property:key,label:schema.title||key,schema:schema,component:schema.component||{}};if(!property.component.valueProperty){property.component.valueProperty="value"}if(!property.component.slot){property.component.slot=""}if(ctx._isSchemaEnum(schema)){property.component.name=property.component.name||"eco-json-schema-enum";if(babelHelpers.typeof(schema.value)==="undefined"){schema.value=""}property.value=schema.value}else if(ctx._isSchemaGeo(schema.type)){property.component.name=property.component.name||"eco-json-schema-geolocation";if(babelHelpers.typeof(schema.value)==="undefined"){schema.value={}}property.value=schema.value;property.map=!0;if(schema.zoom!==void 0){property.zoom=schema.zoom}}else if(ctx._isSchemaBoolean(schema.type)){property.component.name=property.component.name||"eco-json-schema-boolean";if(babelHelpers.typeof(schema.value)==="undefined"){schema.value=!1}property.value=schema.value}else if(ctx._isSchemaFile(schema.type)){property.component.name=property.component.name||"eco-json-schema-file";if(babelHelpers.typeof(schema.value)==="undefined"){schema.value={}}property.value=schema.value}else if(ctx._isSchemaValue(schema.type)){property.component.name=property.component.name||"eco-json-schema-input";if(babelHelpers.typeof(schema.value)==="undefined"){schema.value=""}property.value=schema.value}else if(ctx._isSchemaObject(schema.type)){property.component.name=property.component.name||"eco-json-schema-object";if(babelHelpers.typeof(schema.value)==="undefined"){schema.value={}}property.value=schema.value}else if(ctx._isSchemaArray(schema.type)){property.component.name=property.component.name||"eco-json-schema-array";if(babelHelpers.typeof(schema.value)==="undefined"){schema.value=[]}property.value=schema.value}else{return console.error("Unknown property type %s",schema.type)}return property})},_schemaPropertyChanged:function _schemaPropertyChanged(event,detail){if(detail.path&&/\.length$/.test(detail.path)){return}var ctx=this,property=event.target.schemaProperty,path=["value",property.property];if(detail.path&&/\.splices$/.test(detail.path)){var parts=detail.path.split(".").slice(1,-1);while(parts.length){path.push(parts.shift());if(property.keyMap&&property.keyMap[path.join(".")]){path=property.keyMap[path.join(".")].split(".")}}if(detail.value.keySplices){if(property.keyMap){detail.value.keySplices.forEach(function(splice){splice.removed.forEach(function(k){delete property.keyMap[path.concat([k]).join(".")]})})}}if(detail.value){detail.value.indexSplices.forEach(function(splice){var args=[path.join("."),splice.index,splice.removed.length];if(splice.addedCount){for(var i=0,ii=splice.addedCount;i<ii;i++){if(splice.addedKeys&&splice.addedKeys[i]){property.keyMap=property.keyMap||{};property.keyMap[path.concat([splice.addedKeys[i]]).join(".")]=path.concat([i+splice.index]).join(".")}args.push(ctx._deepClone(splice.object[i+splice.index]))}}ctx.splice.apply(ctx,args)})}}else if(detail.path){var parts=detail.path.split(".").slice(1),v=this.value;if(!v.hasOwnProperty(property.property)){this.set("value."+property.property,{})}while(parts.length){var k=parts.shift();path.push(k);if(property.keyMap&&property.keyMap[path.join(".")]){path=property.keyMap[path.join(".")].split(".")}}this.set(path.join("."),this._deepClone(detail.value))}else{property.value=detail.value;this.set(path,this._deepClone(detail.value))}},_setValue:function _setValue(){var ctx=this,value={};this._schemaProperties.forEach(function(property){if(babelHelpers.typeof(property.value)!=="undefined"){value[property.property]=ctx._deepClone(property.value)}});this.value=value},_buildForm:function _buildForm(){var ctx=this;this._schemaProperties.forEach(function(property){var el=ctx.create(property.component.name,{label:property.label,schema:property.schema,schemaProperty:property,language:this.language,resources:this.resources});el.setAttribute("name",property.property);el.className="flex start-justified";el[property.component.valueProperty]=property.value;for(var attr in property.component.attributes){el.setAttribute(attr,property.component.attributes[attr])}for(var prop in property.component.properties){el[prop]=property.component.properties[prop]}ctx.listen(el,property.component.valueProperty.replace(/([A-Z])/g,"-$1").toLowerCase()+"-changed","_schemaPropertyChanged");Polymer.dom(ctx.$.form).appendChild(el);if(""!=property.component.slot){var temp=document.createElement("template");temp.innerHTML=property.component.slot;Polymer.dom(el).appendChild(temp.content)}})},_removePropertyEl:function _removePropertyEl(el){if(babelHelpers.typeof(el.schemaProperty)!=="undefined"){this.unlisten(el,el.schemaProperty.component.valueProperty.replace(/([A-Z])/g,"-$1").toLowerCase()+"-changed","_schemaPropertyChanged")}el.schemaProperty=null;Polymer.dom(this.$.form).removeChild(el)},_clearForm:function _clearForm(){var formEl=Polymer.dom(this.$.form);while(formEl.firstChild){this._removePropertyEl(formEl.firstChild)}},_schemaChanged:function _schemaChanged(){this._clearForm();this._buildSchemaProperties();this._buildForm();this._setValue()},_errorChanged:function _errorChanged(){var ctx=this;Polymer.dom(this.$.form).childNodes.forEach(function(el){var name=el.getAttribute("name");if(ctx.error&&ctx.error[name]){el.error=ctx.error[name]}else{el.error=null}})},_deepClone:function _deepClone(o){return JSON.parse(JSON.stringify(o))},_isSchemaValue:function _isSchemaValue(type){return this._isSchemaBoolean(type)||this._isSchemaNumber(type)||this._isSchemaString(type)||this._isSchemaFile(type)},_isSchemaFile:function _isSchemaFile(type){if(Array.isArray(type)){return-1!==type.indexOf("file")}else{return"file"===type}},_isSchemaBoolean:function _isSchemaBoolean(type){if(Array.isArray(type)){return-1!==type.indexOf("boolean")}else{return"boolean"===type}},_isSchemaEnum:function _isSchemaEnum(schema){return!!schema.enum},_isSchemaNumber:function _isSchemaNumber(type){if(Array.isArray(type)){return-1!==type.indexOf("number")||-1!==type.indexOf("integer")}else{return"number"===type||"integer"===type}},_isSchemaString:function _isSchemaString(type){if(Array.isArray(type)){return-1!==type.indexOf("string")}else{return"string"===type}},_isSchemaGeo:function _isSchemaGeo(type){return"geolocation"===type},_isSchemaObject:function _isSchemaObject(type){return"object"===type},_isSchemaArray:function _isSchemaArray(type){return"array"===type}});</script></dom-module></body></html>