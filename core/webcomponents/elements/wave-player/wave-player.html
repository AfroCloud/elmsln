<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../paper-material/paper-material.html"><link rel="import" href="../paper-fab/paper-fab.html"><link rel="import" href="../paper-icon-button/paper-icon-button.html"><link rel="import" href="../iron-icons/iron-icons.html"><link rel="import" href="../iron-icons/av-icons.html"><link rel="import" href="../hax-body-behaviors/hax-body-behaviors.html"><link rel="import" href="../schema-behaviors/schema-behaviors.html"><link rel="import" href="wavesurferimport.html"><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"><link rel="prefetch" href="../paper-styles/shadow.html"><link rel="prefetch" href="../paper-material/paper-material-shared-styles.html"><link rel="prefetch" href="../iron-flex-layout/iron-flex-layout.html"><link rel="prefetch" href="../iron-icon/iron-icon.html"><link rel="prefetch" href="../iron-meta/iron-meta.html"><link rel="prefetch" href="../paper-behaviors/paper-button-behavior.html"><link rel="prefetch" href="../iron-behaviors/iron-button-state.html"><link rel="prefetch" href="../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="prefetch" href="../iron-behaviors/iron-control-state.html"><link rel="prefetch" href="../paper-behaviors/paper-ripple-behavior.html"><link rel="prefetch" href="../paper-ripple/paper-ripple.html"><link rel="prefetch" href="../paper-styles/color.html"><link rel="prefetch" href="../paper-styles/default-theme.html"><link rel="prefetch" href="../paper-behaviors/paper-inky-focus-behavior.html"><link rel="prefetch" href="../iron-iconset-svg/iron-iconset-svg.html"><link rel="prefetch" href="../wavesurfer.js/dist/wavesurfer.min.js"></head><body><dom-module id="wave-player"><template><style>:host{min-width:480px;height:150px;background-color:var(--dark-primary-color);}paper-icon-button{position:absolute;}.title,
      .subtitle{transition:all .5s ease;padding:10px 10px 10px 0;left:160px;position:absolute;}.subtitle{bottom:0;}.controls{height:50px;width:100%;top:0;background:var(--accent-color);z-index:20;}paper-fab{transition:all .5s ease;top:-25px;z-index:25;border-radius:0;}.albuminfo{position:relative;transition:all .5s ease;top:-156px;margin-bottom:-150px;z-index:20;height:150px;width:400px;background-color:rgba(0, 0, 0, .4);color:#fff;font-family:Roboto, sans-serif;}.albuminfoActive{top:-25;height:25px;width:100%;margin-bottom:-19px;}.waveContainer{top:-31px;transition:all .5s ease;background-color:var(--dark-primary-color);transform:scaleY(1.5);}.circleAnimation{border-radius:50%;overflow:auto;-moz-box-shadow:0 2px 5px 0 rgba(0, 0, 0, .4);box-shadow:0 2px 5px 0 rgba(0, 0, 0, .4);}.circleAnimation:active{-moz-box-shadow:0 8px 17px 0 rgba(0, 0, 0, .2);box-shadow:0 8px 17px 0 rgba(0, 0, 0, .2);}.playActive{top:0;width:100%;height:50px;}.waveActive{top:0px;transform:scaleY(1);}.centred,
      .titleActive{transform:scaleY(0);}.titleActive{opacity:0;}#playbutton{transition:all .5s ease;}.coverart{transition:all .5s ease;width:150px;height:150px;}.title{font-size:24px;}.coverartActive{width:25px;height:25px;}.nameActive{font-size:19px;padding:3px 3px 3px 0;left:30px;}.centred{top:calc(50% - 20px);left:calc(50% - 20px);transition:all .3s ease;}.left,
      .middle,
      .right{transform:scale(1);}.left{left:calc(25% - 20px);}.right{left:calc(75% - 20px);}.hidden{display:none;}@media only screen and (max-width: 500px){.albuminfo{width:100%;}}</style><paper-fab id="playbutton" class="circleAnimation" disabled="" icon="av:play-arrow" on-click="togglePlay"></paper-fab><paper-material id="controls" class="controls hidden" elevation="2"><paper-icon-button class="centred middle" style="color: white;" icon="av:pause" on-click="togglePlay"></paper-icon-button><paper-icon-button id="replay" class="centred" style="color: white;" icon="av:replay-30" on-click="throwBack"></paper-icon-button><paper-icon-button id="mute" class="centred" style="color: white;" icon="av:volume-up" on-click="toggleMute"></paper-icon-button></paper-material><paper-material id="container" class="waveContainer" elevation="0"></paper-material><div id="albuminfo" class="albuminfo"><img class="coverart" src="[[coverart]]"> <span class="title">[[title]]</span> <span class="subtitle">[[subtitle]]</span></div></template></dom-module><script>(function(){"use strict";Polymer({is:"wave-player",behaviors:[HAXBehaviors.PropertiesBehaviors,SchemaBehaviors.Schema],properties:{src:{type:String,value:"",notify:!0,observer:"_srcChanged"},title:{type:String,value:"",notify:!0},subtitle:{type:String,value:"",notify:!0},coverart:{type:String,value:"",notify:!0},wavesurfer:{type:Object},lean:{type:String,value:"left",notify:!0},wavecolor:{type:String,value:"#ffffff",notify:!0},progresscolor:{type:String,value:"#CFD8DC",notify:!0}},_srcChanged:function _srcChanged(newValue){if(babelHelpers.typeof(newValue)!=="undefined"&&""!==newValue){window.wavesurferobject.load(this.src)}},attached:function attached(){this.setHaxProperties({canScale:!0,canPosition:!0,canEditSource:!1,gizmo:{title:"Audio player",description:"Audio that is just like spotify.",icon:"av:play-circle-filled",color:"purple",groups:["Video","Media"],handles:[{type:"audio",source:"src",title:"title",caption:"subtitle"}],meta:{author:"LRNWebComponents"}},settings:{quick:[{property:"src",title:"Source",description:"The URL for this video.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"}],configure:[{property:"src",title:"Source",description:"The URL for this video.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"},{property:"title",title:"Title",description:"A simple title",inputMethod:"textfield",icon:"av:video-label",required:!1,validationType:"text"}],advanced:[]}})},ready:function ready(){this.updateWavesurfer();if("right"===this.lean){this.$.playbutton.style.right="25";this.$.controls.style.right="0"}else{this.$.playbutton.style.left="25";this.$.controls.style.left="0"}if(""===this.name){this.$.albuminfo.classList.add("hidden")}if(""===this.coverart){this.coverart=this.resolveUrl("art.jpg")}},activateAnimation:function activateAnimation(){var self=this,waveStyle=this.$.container,buttonStyle=this.$.playbutton,controlsStyle=this.$.controls,muteStyle=this.$.mute,replayStyle=this.$.replay,albumStyle=this.$.albuminfo,coverartStyle=albumStyle.querySelector(".coverart"),nameStyle=albumStyle.querySelector(".title"),titleStyle=albumStyle.querySelector(".subtitle");buttonStyle.setAttribute("icon","av:pause");buttonStyle.classList.remove("circleAnimation");buttonStyle.classList.add("playActive");albumStyle.classList.add("albuminfoActive");coverartStyle.classList.add("coverartActive");nameStyle.classList.add("nameActive");titleStyle.classList.add("titleActive");if("right"===self.lean){this.$.playbutton.style.right="0"}else{this.$.playbutton.style.left="0"}waveStyle.classList.add("waveActive");setTimeout(function(){controlsStyle.classList.remove("hidden");buttonStyle.classList.add("hidden")},500);setTimeout(function(){muteStyle.classList.add("right");replayStyle.classList.add("left")},600)},deactivateAnimation:function deactivateAnimation(){var self=this,waveStyle=this.$.container,buttonStyle=this.$.playbutton,controlsStyle=this.$.controls,muteStyle=this.$.mute,replayStyle=this.$.replay,albumStyle=this.$.albuminfo,coverartStyle=albumStyle.querySelector(".coverart"),nameStyle=albumStyle.querySelector(".title"),titleStyle=albumStyle.querySelector(".subtitle");muteStyle.classList.remove("right");replayStyle.classList.remove("left");setTimeout(function(){controlsStyle.classList.add("hidden");buttonStyle.classList.remove("hidden")},100);setTimeout(function(){buttonStyle.setAttribute("icon","av:play-arrow");buttonStyle.classList.add("circleAnimation");buttonStyle.classList.remove("playActive");albumStyle.classList.remove("albuminfoActive");coverartStyle.classList.remove("coverartActive");nameStyle.classList.remove("nameActive");titleStyle.classList.remove("titleActive");if("right"===self.lean){buttonStyle.style.right="25"}else{buttonStyle.style.left="25"}waveStyle.classList.remove("waveActive")},200)},initWaveSurfer:function initWaveSurfer(){var self=this;window.wavesurferobject.init({container:this.$.container,waveColor:this.wavecolor,progressColor:this.progresscolor,fillParent:!0,height:100});window.wavesurferobject.on("ready",function(){self.$.playbutton.removeAttribute("disabled")});window.wavesurferobject.on("finish",function(){self.deactivateAnimation()})},updateWavesurfer:function updateWavesurfer(){window.wavesurferobject=Object.create(WaveSurfer);this.initWaveSurfer()},togglePlay:function togglePlay(){window.wavesurferobject.playPause();var iconType=this.$.playbutton.getAttribute("icon");if("av:play-arrow"===iconType){this.activateAnimation()}else{this.deactivateAnimation()}},toggleMute:function toggleMute(){var muteStyle=this.$.mute,iconType=muteStyle.getAttribute("icon");window.wavesurferobject.toggleMute();if("av:volume-up"===iconType){muteStyle.setAttribute("icon","av:volume-off")}else{muteStyle.setAttribute("icon","av:volume-up")}},throwBack:function throwBack(){window.wavesurferobject.skipBackward(30)}})})();</script></body></html>