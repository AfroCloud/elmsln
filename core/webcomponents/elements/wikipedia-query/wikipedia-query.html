<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../iron-ajax/iron-ajax.html"><link rel="import" href="../hax-body-behaviors/hax-body-behaviors.html"><link rel="import" href="../schema-behaviors/schema-behaviors.html"><link rel="import" href="../citation-element/citation-element.html"><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"><link rel="prefetch" href="../iron-ajax/iron-request.html"></head><body><dom-module id="wikipedia-query"><template><style>:host{display:block;--wikipedia-query-body-height:10em;}#result{height:var(--wikipedia-query-body-height);overflow:scroll;border:1px grey solid;padding:.5em 1em;}citation-element{background-color:#F8F8F8;padding:16px 8px;font-size:12px;}</style><iron-ajax hidden="" auto="" url$="https://en.wikipedia.org/w/api.php?origin=*&amp;action=query&amp;titles=[[search]]&amp;prop=extracts&amp;format=json" handle-as="json" on-response="handleResponse" last-response="{{searchResponse}}"></iron-ajax><h3 hidden$="[[!showTitle]]">[[search]] Wikipedia article</h3><div id="result" hidden$="[[!__rendercontent]]"></div><citation-element hidden$="[[!__rendercontent]]" creator="{Wikipedia contributors}" scope="sibling" license="by-sa" title="[[search]] --- {Wikipedia}{,} The Free Encyclopedia" source="https://en.wikipedia.org/w/index.php?title=[[search]]" date="[[__now]]"></citation-element></template><script>Polymer({is:"wikipedia-query",behaviors:[HAXBehaviors.PropertiesBehaviors,SchemaBehaviors.Schema],properties:{showTitle:{type:Boolean,value:!0},search:{type:String,value:"Polymer (library)"},renderAs:{type:String,value:"content",observer:"_renderAsUpdated"},searchResponse:{type:Object}},attached:function attached(){var date=new Date(Date.now());this.__now=date.getDate()+"/"+date.getMonth()+"/"+date.getFullYear();this.setHaxProperties({canScale:!0,canPosition:!0,canEditSource:!1,gizmo:{title:"Wikipedia article",description:"This can display a wikipedia article in context in a variety of formats.",icon:"book",color:"green",groups:["Content","Creative Commons"],handles:[{type:"content",title:"search"}],meta:{author:"LRNWebComponents"}},settings:{quick:[{property:"search",title:"Search term",description:"Word to search wikipedia for.",inputMethod:"textfield",icon:"editor:title",required:!0},{property:"showTitle",title:"Show title",description:"Whether or not to render the title of the article.",inputMethod:"boolean",icon:"editor:title"}],configure:[{property:"search",title:"Search term",description:"Word to search wikipedia for.",inputMethod:"textfield",icon:"editor:title",required:!0}]},saveOptions:{wipeSlot:!0}})},_renderAsUpdated:function _renderAsUpdated(newValue){if(babelHelpers.typeof(newValue)!=="undefined"){this._resetRenderMethods();this["__render"+newValue]=!0}},_validRenderMethods:function _validRenderMethods(){return["content"]},_resetRenderMethods:function _resetRenderMethods(){for(var methods=this._validRenderMethods(),i=0;i<methods.length;i++){this["__render"+methods[i]]=!1}},handleResponse:function handleResponse(){for(var key in this.searchResponse.query.pages){if(!this.searchResponse.query.pages.hasOwnProperty(key))continue;var obj=this.searchResponse.query.pages[key];this.$.result.innerHTML=obj.extract}}});</script></dom-module></body></html>