<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../app-layout/app-drawer/app-drawer.html"><link rel="import" href="../paper-icon-button/paper-icon-button.html"><link rel="import" href="../paper-input/paper-input.html"><link rel="import" href="../paper-button/paper-button.html"><link rel="import" href="../mtz-file-download-behavior/mtz-file-download-behavior.html"><link rel="import" href="../simple-colors/simple-colors.html"><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"><link rel="prefetch" href="../iron-flex-layout/iron-flex-layout.html"><link rel="prefetch" href="../iron-icon/iron-icon.html"><link rel="prefetch" href="../iron-meta/iron-meta.html"><link rel="prefetch" href="../paper-behaviors/paper-inky-focus-behavior.html"><link rel="prefetch" href="../iron-behaviors/iron-button-state.html"><link rel="prefetch" href="../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="prefetch" href="../iron-behaviors/iron-control-state.html"><link rel="prefetch" href="../paper-behaviors/paper-ripple-behavior.html"><link rel="prefetch" href="../paper-ripple/paper-ripple.html"><link rel="prefetch" href="../paper-styles/default-theme.html"><link rel="prefetch" href="../paper-styles/color.html"><link rel="prefetch" href="../iron-form-element-behavior/iron-form-element-behavior.html"><link rel="prefetch" href="../iron-input/iron-input.html"><link rel="prefetch" href="../iron-a11y-announcer/iron-a11y-announcer.html"><link rel="prefetch" href="../iron-validatable-behavior/iron-validatable-behavior.html"><link rel="prefetch" href="../paper-input/paper-input-behavior.html"><link rel="prefetch" href="../paper-input/paper-input-char-counter.html"><link rel="prefetch" href="../paper-styles/typography.html"><link rel="prefetch" href="../font-roboto/roboto.html"><link rel="prefetch" href="../paper-input/paper-input-addon-behavior.html"><link rel="prefetch" href="../paper-input/paper-input-container.html"><link rel="prefetch" href="../paper-input/paper-input-error.html"><link rel="prefetch" href="../paper-behaviors/paper-button-behavior.html"><link rel="prefetch" href="../paper-styles/element-styles/paper-material-styles.html"><link rel="prefetch" href="../paper-styles/shadow.html"><link rel="prefetch" href="../simple-colors/simple-colors-utility.html"></head><body><dom-module id="hax-export-dialog"><template><style>:host{display:block;}#dialog{z-index:1000;margin-top:64px;}paper-icon-button#closedialog{float:right;top:135px;right:0;position:absolute;padding:4px;margin:0;color:var(--simple-colors-light-green-background1);}.title{margin-top:32px;text-align:center;padding:16px;margin:0;background-color:rgba(0, 0, 0, 0.5);font-size:32px;font-weight:bold;font-family:sans-serif;text-transform:uppercase;color:var(--simple-colors-light-green-background1);}.pref-container{text-align:left;padding:16px;}app-drawer{--app-drawer-content-container:{background-color:rgba(0, 0, 0, 0.7);};--app-drawer-width:320px;}paper-button{color:#222222;text-transform:none;margin:0;background-color:#F8F8F8;display:flex;border-radius:0px;border-style:solid;border-width:1px;min-width:unset;}paper-button:focus,
      paper-button:hover{background-color:var(--simple-colors-light-green-background1);border-color:var(--simple-colors-light-green-background1);outline:2px solid var(--simple-colors-light-green-background1);}.buttons paper-button{color:black;font-size:12px;font-weight:bold;text-transform:none;}#textarea{margin-bottom:16px;padding:10px;width:90%;font-size:10px;resize:none;width:80%;width:-webkit-fill-available;background-color:transparent;color:#EEEEEE;font-family:monospace;}</style><app-drawer id="dialog" align="right"><h3 class="title">[[title]]</h3><div style="height: 100%; overflow: auto;" class="pref-container"><textarea id="textarea" rows="20"></textarea><div class="buttons"><paper-button id="downloadfull" raised="">Download as full file</paper-button><paper-button id="download" raised="">Download HTML contents only</paper-button><paper-button id="copy" raised="">Copy to clipboard</paper-button><paper-button id="import" raised="" hidden$="[[!globalPreferences.haxDeveloperMode]]">Import textarea into HAX</paper-button><paper-button id="elementexport" raised="" hidden$="[[!globalPreferences.haxDeveloperMode]]">Copy as HAX schema to clipboard</paper-button><paper-button id="close" raised="">Close dialog</paper-button></div></div><paper-icon-button id="closedialog" on-tap="close" icon="icons:cancel" title="Close dialog"></paper-icon-button></app-drawer></template><script>Polymer({is:"hax-export-dialog",listeners:{"download.tap":"download","downloadfull.tap":"downloadfull","import.tap":"importContent","copy.tap":"selectBody","close.tap":"close","elementexport.tap":"htmlToHaxElements"},behaviors:[mtz.FileDownloadBehavior,simpleColorsBehaviors],properties:{title:{type:String,value:"Export"},globalPreferences:{type:Object,value:{}}},ready:function ready(){document.body.appendChild(this);document.body.addEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this))},attached:function attached(){this.fire("hax-register-export",this)},detached:function detached(){document.body.removeEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this))},_haxStorePropertyUpdated:function _haxStorePropertyUpdated(e){if(e.detail&&babelHelpers.typeof(e.detail.value)!=="undefined"&&e.detail.property){if("object"===babelHelpers.typeof(e.detail.value)){this.set(e.detail.property,null)}this.set(e.detail.property,e.detail.value)}},download:function download(){var data=this.contentToFile(!1);this.downloadFromData(data,"html","my-new-code")},downloadfull:function downloadfull(){var data=this.contentToFile(!0);this.downloadFromData(data,"html","my-new-webpage")},importContent:function importContent(){var htmlBody=this.$.textarea.value;return Polymer.HaxStore.instance.activeHaxBody.importContent(htmlBody)},selectBody:function selectBody(){this.$.textarea.focus();this.$.textarea.select();document.execCommand("copy")},htmlToHaxElements:function htmlToHaxElements(){var elements=Polymer.HaxStore.htmlToHaxElements(this.$.textarea.value),str=JSON.stringify(elements,null,2),val=this.$.textarea.value;this.$.textarea.value=str;this.$.textarea.focus();this.$.textarea.select();document.execCommand("copy");this.$.textarea.value=val},contentToFile:function contentToFile(full){var content="";if(full){var elementList=Polymer.HaxStore.instance.elementList,url="https://lrnwebcomponents.github.io/hax-body/components";content="\n          <!doctype html>\n          <html lang=\"en\">\n            <head>\n              <meta charset=\"utf-8\">\n              <meta name=\"viewport\" content=\"width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes\">\n              <title>hax-body demo</title>\n            <script src=\"".concat(url,"/webcomponentsjs/webcomponents-lite.js\">");content+="</";content+="script>";content+="\n            <style>\n            body {\n              padding: 32px;\n            }\n            </style>\n            <script>\n            /* this script must run before Polymer is imported */\n            window.Polymer = {\n              dom: 'shady',\n              lazyRegister: true\n            };\n          ";content+="</";content+="script>";var ignoreList=["iframe","a","img","hr","p"];for(var index in elementList){if(-1===ignoreList.indexOf(index)){content+="<link rel=\"import\" href=\""+url+"/"+index+"/"+index+".html\" />"+"\n"}}content+="</head><body>";content+=Polymer.HaxStore.instance.activeHaxBody.haxToContent();content+="</body></html>"}else{content=Polymer.HaxStore.instance.activeHaxBody.haxToContent()}return content},toggleDialog:function toggleDialog(){if(this.$.dialog.opened){this.close()}else{this.$.textarea.value=this.contentToFile(!1);Polymer.HaxStore.instance.closeAllDrawers(this)}},open:function open(){this.$.dialog.open()},close:function close(){this.$.dialog.close()}});</script></dom-module></body></html>