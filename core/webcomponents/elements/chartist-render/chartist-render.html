<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="chartist-lib.html"><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"><link rel="prefetch" href="../chartist/dist/chartist.min.js"></head><body><dom-module id="chartist-render"><template><style>:host{display:block;}</style><div id="chart" chart$="[[__chartId]]" class$="ct-chart [[scale]]"></div></template><script>Polymer({is:"chartist-render",listeners:{"chart.tap":"makeChart"},properties:{id:{type:String,value:"chart"},type:{type:String,value:"bar"},scale:{type:String,value:"ct-octave"},chartTitle:{type:String,value:null},chartDesc:{type:String,value:""},data:{type:Object,value:null},options:{type:Object,value:null},responsiveOptions:{type:Array,value:[]},showTable:{type:Boolean,value:!1}},ready:function ready(){this.__chartId=this._getUniqueId("test-");if(null!==this.data){this.makeChart()}},makeChart:function makeChart(){var root=this,chart;if("bar"==this.type){chart=Chartist.Bar("[chart=\""+this.__chartId+"\"]",this.data,this.options,this.responsiveOptions)}else if("line"==this.type){chart=Chartist.Line("[chart=\""+this.__chartId+"\"]",this.data,this.options,this.responsiveOptions)}else if("pie"==this.type){chart=Chartist.Pie("[chart=\""+this.__chartId+"\"]",this.data,this.options,this.responsiveOptions)}chart.on("created",function(){root.addA11yFeatures(chart.container.childNodes[0])});return chart},addA11yFeatures:function addA11yFeatures(svg){for(var title=null!==this.chartTitle?this.chartTitle:"A "+this.type+" chart.",table=["<table summary=\"Each column is a series of data, and the first column is the data label.\">","<caption>"+title+"</caption>","<tbody>"],i=0;i<this.data.labels.length;i++){table.push("<tr><th scope=\"row\">"+this.data.labels[i]+"</th>");if("pie"==this.type){table.push("<td>"+this.data.series[i]+"</td>")}else{for(var j=0;j<this.data.series.length;j++){table.push("<td>"+this.data.series[j][i]+"</td>")}}table.push("</tr>")}table.push("</tbody></table>");this._addA11yFeature(svg,"desc",this.chartDesc+table.join(""));this._addA11yFeature(svg,"title",title);svg.setAttribute("aria-labelledby",this.__chartId+"-chart-title "+this.__chartId+"-chart-desc")},_addA11yFeature:function _addA11yFeature(svg,tag,html){var el=document.createElement(tag),first=svg.childNodes[0];el.innerHTML=html;el.setAttribute("id",this.__chartId+"-chart-"+tag);svg.insertBefore(el,first)},_getUniqueId:function _getUniqueId(prefix){var id=prefix+Date.now();while(null!==document.querySelector("[chart=\""+id+"\"]")){id=prefix+Date.now()}return id}});</script></dom-module></body></html>