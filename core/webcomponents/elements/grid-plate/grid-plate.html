<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../hax-body-behaviors/hax-body-behaviors.html"><link rel="import" href="../simple-colors/simple-colors.html"><link rel="import" href="../iron-a11y-keys/iron-a11y-keys.html"><link rel="import" href="../paper-icon-button/paper-icon-button.html"><link rel="import" href="../responsive-grid/responsive-grid-row.html"><link rel="import" href="../responsive-grid/responsive-grid-col.html"><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"><link rel="prefetch" href="../simple-colors/simple-colors-utility.html"><link rel="prefetch" href="../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="prefetch" href="../iron-icon/iron-icon.html"><link rel="prefetch" href="../iron-meta/iron-meta.html"><link rel="prefetch" href="../iron-flex-layout/iron-flex-layout.html"><link rel="prefetch" href="../paper-behaviors/paper-inky-focus-behavior.html"><link rel="prefetch" href="../iron-behaviors/iron-button-state.html"><link rel="prefetch" href="../iron-behaviors/iron-control-state.html"><link rel="prefetch" href="../paper-behaviors/paper-ripple-behavior.html"><link rel="prefetch" href="../paper-ripple/paper-ripple.html"><link rel="prefetch" href="../paper-styles/default-theme.html"><link rel="prefetch" href="../paper-styles/color.html"><link rel="prefetch" href="../responsive-utility/responsive-utility.html"><link rel="prefetch" href="../iron-resizable-behavior/iron-resizable-behavior.html"><link rel="prefetch" href="../responsive-grid/responsive-grid-clear.html"></head><body><dom-module id="grid-plate"><template><style>:host{display:block;}responsive-grid-col{--responsive-grid-col-inner:{padding-left:0;padding-right:0;};}responsive-grid-row{--responsive-grid-row-inner:{margin-left:0;margin-right:0;};}:host[edit-mode] responsive-grid-col.mover{min-height:150px;background-color:#d1d1d1;}:host ::slotted(*) .mover,
      :host responsive-grid-col[data-draggable].mover{outline:2px dotted #d1d1d1;outline-offset:2px;background-color:rgba(240, 240, 240, .2);}:host ::slotted(*) .active-item{outline:2px dashed #aaaaaa !important;outline-offset:2px;background-color:rgba(220, 220, 220, .6) !important;}:host ::slotted(*) [data-draggable]:focus,
      :host ::slotted(*) [data-draggable]:hover,
      :host ::slotted(*) [data-draggable]:active{outline:2px dotted #d1d1d1;outline-offset:2px;background-color:rgba(240, 240, 240, .2);cursor:move !important;}paper-icon-button{display:none;position:absolute;margin:0;padding:0;outline:none;width:20px;height:20px;background-color:#EEEEEE;border-radius:50%;box-sizing:content-box !important;z-index:1;}paper-icon-button.active{display:block;}.button-holding-pen{position:relative;}</style><div class="button-holding-pen"><paper-icon-button title="move item up" icon="icons:arrow-upward" id="up"></paper-icon-button><paper-icon-button title="move item right" icon="icons:arrow-forward" id="right"></paper-icon-button><paper-icon-button title="move item down" icon="icons:arrow-downward" id="down"></paper-icon-button><paper-icon-button title="move item left" icon="icons:arrow-back" id="left"></paper-icon-button></div><responsive-grid-row gutter="0"><template is="dom-if" if="[[!hideCol1]]"><responsive-grid-col id="col1" style$="background-color:[[__col1Color]];" xl$="[[col1_xl]]" lg$="[[col1_lg]]" md$="[[col1_md]]" sm$="[[col1_sm]]" xs$="[[col1_xs]]"><slot name="col-1"></slot></responsive-grid-col></template><template is="dom-if" if="[[!hideCol2]]"><responsive-grid-col id="col2" style$="background-color:[[__col2Color]];" xl$="[[col2_xl]]" lg$="[[col2_lg]]" md$="[[col2_md]]" sm$="[[col2_sm]]" xs$="[[col2_xs]]"><slot name="col-2"></slot></responsive-grid-col></template><template is="dom-if" if="[[!hideCol3]]"><responsive-grid-col id="col3" style$="background-color:[[__col3Color]];" xl$="[[col3_xl]]" lg$="[[col3_lg]]" md$="[[col3_md]]" sm$="[[col3_sm]]" xs$="[[col3_xs]]"><slot name="col-3"></slot></responsive-grid-col></template><template is="dom-if" if="[[!hideCol4]]"><responsive-grid-col id="col4" style$="background-color:[[__col4Color]];" xl$="[[col4_xl]]" lg$="[[col4_lg]]" md$="[[col4_md]]" sm$="[[col4_sm]]" xs$="[[col4_xs]]"><slot name="col-4"></slot></responsive-grid-col></template><responsive-grid-col xl="12" lg="12" md="12" sm="12" xs="12"><slot></slot></responsive-grid-col></responsive-grid-row><iron-a11y-keys stop-keyboard-event-propagation="" target="[[__activeItem]]" keys="enter" on-keys-pressed="setActiveElement"></iron-a11y-keys><iron-a11y-keys target="[[__activeItem]]" keys="esc" on-keys-pressed="cancelActive"></iron-a11y-keys></template><script>Polymer({is:"grid-plate",listeners:{focusin:"_focusIn","up.tap":"moveActiveElement","down.tap":"moveActiveElement","left.tap":"moveActiveElement","right.tap":"moveActiveElement"},behaviors:[HAXBehaviors.PropertiesBehaviors,window.simpleColorsBehaviors],properties:{layout:{type:String,value:"12",observer:"_layoutChanged"},editMode:{reflectToAttribute:!0,type:Boolean,value:!1,observer:"_editModeChanged"},colors:{type:String,value:""},col1Color:{type:String,value:""},col2Color:{type:String,value:""},col3Color:{type:String,value:""},col4Color:{type:String,value:""},_colors:{type:String,computed:"_colorCreation(colors, col1Color, col2Color, col3Color, col4Color)",observer:"_colColors"},__activeItem:{type:Object,observer:"_activeItemChanged"}},cancelActive:function cancelActive(){this.__activeItem=null},moveActiveElement:function moveActiveElement(e){var _this=this,normalizedEvent=Polymer.dom(e),local=normalizedEvent.localTarget,col=this.__activeItem.getAttribute("slot").split("-"),max=1,cols=[1,2,3,4];for(var j in cols){if(!this["hideCol"+cols[j]]){max=cols[j]}}switch(local.id){case"up":if(null!==this.__activeItem.previousElementSibling){Polymer.dom(this).insertBefore(this.__activeItem,this.__activeItem.previousElementSibling)}break;case"down":if(null!==this.__activeItem.nextElementSibling){Polymer.dom(this).insertBefore(this.__activeItem.nextElementSibling,this.__activeItem)}break;case"left":if(1<parseInt(col[1])){this.__activeItem.setAttribute("slot","col-"+(parseInt(col[1])-1));Polymer.dom(this).appendChild(this.__activeItem)}break;case"right":if(parseInt(col[1])<max){this.__activeItem.setAttribute("slot","col-"+(parseInt(col[1])+1));Polymer.dom(this).appendChild(this.__activeItem)}break;}setTimeout(function(){_this.positionArrows(_this.__activeItem);_this.__activeItem.focus()},100)},_activeItemChanged:function _activeItemChanged(newValue,oldValue){if(babelHelpers.typeof(newValue)!=="undefined"&&null!=newValue){newValue.classList.add("active-item");this.positionArrows(newValue)}else if(null==newValue){this.positionArrows(newValue)}if(babelHelpers.typeof(oldValue)!=="undefined"&&null!=oldValue){oldValue.classList.remove("active-item");oldValue.blur()}},setActiveElement:function setActiveElement(e){var normalizedEvent=Polymer.dom(e),local=normalizedEvent.localTarget;this.$.up.focus();e.preventDefault();e.stopPropagation()},_focusIn:function _focusIn(e){if(this.editMode){var normalizedEvent=Polymer.dom(e),local=normalizedEvent.localTarget;if(Polymer.dom(local).parentNode===this){this.__activeItem=local}}},positionArrows:function positionArrows(item){if(null==item){this.$.up.classList.remove("active");this.$.down.classList.remove("active");this.$.left.classList.remove("active");this.$.right.classList.remove("active")}else{this.$.up.classList.add("active");this.$.down.classList.add("active");this.$.left.classList.add("active");this.$.right.classList.add("active");this.$.up.disabled=!1;this.$.down.disabled=!1;this.$.left.disabled=!1;this.$.right.disabled=!1;var bodyRect=this.getBoundingClientRect(),elemRect=item.getBoundingClientRect(),topOffset=elemRect.top-bodyRect.top,leftOffset=elemRect.left-bodyRect.left;this.$.up.style.top=topOffset-20+"px";this.$.down.style.top=topOffset+elemRect.height+"px";this.$.left.style.top=topOffset+elemRect.height/2+"px";this.$.right.style.top=topOffset+elemRect.height/2+"px";this.$.up.style.left=leftOffset+elemRect.width/2-10+"px";this.$.down.style.left=leftOffset+elemRect.width/2-10+"px";this.$.left.style.left=leftOffset-20+"px";this.$.right.style.left=leftOffset+elemRect.width+"px";var col=item.getAttribute("slot").split("-"),max=1,cols=[1,2,3,4];for(var j in cols){if(!this["hideCol"+cols[j]]){max=cols[j]}}if(null===item.previousElementSibling){this.$.up.disabled=!0}if(null===item.nextElementSibling){this.$.down.disabled=!0}if(1===parseInt(col[1])){this.$.left.disabled=!0}if(parseInt(col[1])===max){this.$.right.disabled=!0}}},_editModeChanged:function _editModeChanged(newValue,oldValue){var _this2=this;if(newValue&&!oldValue){var children=Polymer.dom(this).children;for(var i in children){children[i].addEventListener("drop",this.dropEvent.bind(this));children[i].addEventListener("dragstart",this.dragStart.bind(this));children[i].addEventListener("dragend",this.dragEnd.bind(this));children[i].addEventListener("dragover",function(e){e.preventDefault()});children[i].setAttribute("draggable",!0);children[i].setAttribute("data-draggable",!0);children[i].setAttribute("tabindex",0)}this.async(function(){var cols=[1,2,3,4];for(var j in cols){if(!_this2["hideCol"+cols[j]]){_this2.$$("#col"+cols[j]).addEventListener("drop",_this2.dropEvent.bind(_this2));_this2.$$("#col"+cols[j]).addEventListener("dragstart",_this2.dragStart.bind(_this2));_this2.$$("#col"+cols[j]).addEventListener("dragend",_this2.dragEnd.bind(_this2));_this2.$$("#col"+cols[j]).addEventListener("dragover",function(e){e.preventDefault()});_this2.$$("#col"+cols[j]).setAttribute("data-draggable",!0)}}})}else if(!newValue&&oldValue){var _children=Polymer.dom(this).children;for(var i in _children){_children[i].removeEventListener("drop",this.dropEvent.bind(this));_children[i].removeEventListener("dragstart",this.dragStart.bind(this));_children[i].removeEventListener("dragend",this.dragEnd.bind(this));_children[i].removeEventListener("dragover",function(e){e.preventDefault()});_children[i].removeAttribute("draggable");_children[i].removeAttribute("data-draggable");_children[i].removeAttribute("tabindex")}this.async(function(){var cols=[1,2,3,4];for(var j in cols){if(!_this2["hideCol"+cols[j]]){_this2.$$("#col"+cols[j]).removeEventListener("drop",_this2.dropEvent.bind(_this2));_this2.$$("#col"+cols[j]).removeEventListener("dragstart",_this2.dragStart.bind(_this2));_this2.$$("#col"+cols[j]).removeEventListener("dragend",_this2.dragEnd.bind(_this2));_this2.$$("#col"+cols[j]).removeEventListener("dragover",function(e){e.preventDefault()});_this2.$$("#col"+cols[j]).removeAttribute("data-draggable")}}})}},dropEvent:function dropEvent(e){var _this3=this,normalizedEvent=Polymer.dom(e),local=normalizedEvent.localTarget;if(babelHelpers.typeof(this.__activeItem)!=="undefined"&&babelHelpers.typeof(local)!=="undefined"&&null!=local.getAttribute("slot")&&this.__activeItem!==local){this.__activeItem.setAttribute("slot",local.getAttribute("slot"));Polymer.dom(this).insertBefore(this.__activeItem,local);e.preventDefault();e.stopPropagation()}else if("RESPONSIVE-GRID-COL"===local.tagName){var col=local.id.replace("col","");this.__activeItem.setAttribute("slot","col-"+col);Polymer.dom(this).appendChild(this.__activeItem);e.preventDefault();e.stopPropagation()}var children=Polymer.dom(this).children;for(var i in children){children[i].classList.remove("mover")}var cols=[1,2,3,4];for(var j in cols){if(!this["hideCol"+cols[j]]){this.$$("#col"+cols[j]).classList.remove("mover")}}setTimeout(function(){_this3.positionArrows(_this3.__activeItem);_this3.__activeItem.focus()},100)},_colorCreation:function _colorCreation(colors,col1,col2,col3,col4){var items=colors.split("/"),cols=[col1,col2,col3,col4];for(var i in cols){if(""!=cols[i]){items[i]=cols[i]}}return items},dragStart:function dragStart(){var children=Polymer.dom(this).children;for(var i in children){children[i].classList.add("mover")}var cols=[1,2,3,4];for(var j in cols){if(!this["hideCol"+cols[j]]){this.$$("#col"+cols[j]).classList.add("mover")}}},dragEnd:function dragEnd(){var children=Polymer.dom(this).children;for(var i in children){children[i].classList.remove("mover")}var cols=[1,2,3,4];for(var j in cols){if(!this["hideCol"+cols[j]]){this.$$("#col"+cols[j]).classList.remove("mover")}}},splitColor:function splitColor(value){if(""!=value&&babelHelpers.typeof(this.__hexCodes[value])!=="undefined"){return this.__hexCodes[value][this.__hexCodes[value].length-1]}return value},_colColors:function _colColors(newValue){if(""!=newValue){for(var i in newValue){this["__col"+(parseInt(i)+1)+"Color"]=this.splitColor(newValue[i])}}},_layoutChanged:function _layoutChanged(layout){var items=layout.split("/");this.__colCount=items.length;switch(items.length){case 1:this.hideCol1=!1;this.hideCol2=!0;this.hideCol3=!0;this.hideCol4=!0;break;case 2:this.hideCol1=!1;this.hideCol2=!1;this.hideCol3=!0;this.hideCol4=!0;break;case 3:this.hideCol1=!1;this.hideCol2=!1;this.hideCol3=!1;this.hideCol4=!0;break;case 4:this.hideCol1=!1;this.hideCol2=!1;this.hideCol3=!1;this.hideCol4=!1;break;}for(var i in items){var col=+i+1;this["col"+col+"_xl"]=items[i];this["col"+col+"_lg"]=items[i];this["col"+col+"_md"]=items[i];this["col"+col+"_sm"]=items[i];this["col"+col+"_xs"]=items[i]}},attached:function attached(){document.body.addEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this));document.body.addEventListener("hax-insert-content",this.haxInsertContent.bind(this));var colorOptions=[];for(var i in this.__hexCodes){colorOptions[i]=i}this.setHaxProperties({canScale:!0,canPosition:!0,canEditSource:!1,settings:{quick:[],configure:[{property:"layout",title:"Layout",description:"Style to present these items",inputMethod:"select",options:{12:"1 col, full width","8/4":"2 cols, 66% / 33% split","6/6":"2 cols, 50% split","4/8":"2 cols, 33% / 66% split","4/4/4":"3 cols, 33% each","3/3/3/3":"4 cols, 25% each"}},{property:"col1Color",title:"Col 1 color",description:"Color for the 1st column",inputMethod:"select",options:colorOptions},{property:"col2Color",title:"Col 2 color",description:"Color for the 1st column",inputMethod:"select",options:colorOptions},{property:"col3Color",title:"Col 3 color",description:"Color for the 1st column",inputMethod:"select",options:colorOptions},{property:"col4Color",title:"Col 4 color",description:"Color for the 1st column",inputMethod:"select",options:colorOptions}],advanced:[]},saveOptions:{unsetAttributes:["__active-item","_colors","edit-mode"]}})},haxInsertContent:function haxInsertContent(){var _this4=this;if(this===Polymer.HaxStore.instance.activeContainerNode){this.editMode=!1;setTimeout(function(){_this4.editMode=!0;_this4.positionArrows(_this4.__activeItem);_this4.__activeItem.focus()},250)}},_haxStorePropertyUpdated:function _haxStorePropertyUpdated(e){if(e.detail&&babelHelpers.typeof(e.detail.value)!=="undefined"&&e.detail.property){if("object"===babelHelpers.typeof(e.detail.value)){this.set(e.detail.property,null)}this.set(e.detail.property,e.detail.value)}}});</script></dom-module></body></html>